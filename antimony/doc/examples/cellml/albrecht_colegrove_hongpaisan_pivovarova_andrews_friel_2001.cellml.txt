//Created by libAntimony v1.3
model cellmlmod_environment()

  //Other declarations:
  var time;
end

model cellmlmod_total_cytoplasmic_Ca_flux()

  // Assignment Rules:
  J_ICa := I_Ca  / ( 2.0   *  F  *  v_i  *  k_i )

  // Variable initializations:
  F = 96.5;

  //Other declarations:
  var J_ICa, v_i, k_i, F, I_Ca, time;
end

model cellmlmod_Ca_extrusion_across_the_plasma_membrane()

  // Assignment Rules:
  J_pm := J_extru  +  J_ICa
  J_extru := k_leak  * ( Ca_i  -  Ca_o ) +  Vmax_extru  / ( 1.0   + power( EC50_extru  /  Ca_i ,  n_extru ))

  // Variable initializations:
  k_leak = 0.00000015;
  Vmax_extru = 25.0;
  EC50_extru = 386.0;
  n_extru = 2.4;
  Ca_o = 2.0;

  //Other declarations:
  var J_pm, J_extru, k_leak, Vmax_extru, EC50_extru, n_extru, Ca_o, J_ICa;
  var Ca_i, time;
end

model cellmlmod_Ca_uptake_by_SR_Ca_ATPase()

  // Assignment Rules:
  J_SERCA := Vmax_SERCA  / ( 1.0   + power( EC50_SERCA  /  Ca_i ,  n_SERCA ))

  // Variable initializations:
  Vmax_SERCA = 70.0;
  EC50_SERCA = 700.0;
  n_SERCA = 1.0;

  //Other declarations:
  var J_SERCA, Vmax_SERCA, EC50_SERCA, n_SERCA, Ca_i, time;
end

model cellmlmod_ER_Ca_release()

  // Assignment Rules:
  J_ER := J_SERCA  +  J_release
  P_ER := P_basal  +  Pmax_RyR  / ( 1.0   + power( EC50_RyR  /  Ca_i ,  n_RyR ))
  J_release := P_ER  * ( Ca_i  -  Ca_ER )

  // Variable initializations:
  P_basal = 0.0000178;
  Pmax_RyR = 0.0009;
  EC50_RyR = 1.0;
  n_RyR = 1.0;

  //Other declarations:
  var J_ER, P_ER, P_basal, Pmax_RyR, EC50_RyR, n_RyR, J_release, J_SERCA;
  var Ca_i, Ca_ER, time;
end

model cellmlmod_cytoplasmic_calcium()

  // Assignment Rules:
  J_i := J_pm  +  J_ER

  // Rate Rules:
   Ca_i ' = -( J_i )

  //Other declarations:
  var Ca_i, J_i, J_ER, J_pm, time;
end

model cellmlmod_intraluminal_calcium()

  // Assignment Rules:
  gamma_ER := v_ER  *  k_ER  / ( v_i  *  k_i )

  // Rate Rules:
   Ca_ER ' = J_ER  /  gamma_ER

  //Other declarations:
  var Ca_ER, v_ER, k_ER, gamma_ER, Ca_i, v_i, k_i, J_ER, J_SERCA, time;
end

model albrecht_colegrove_hongpaisan_pivovarova_andrews_friel_2001_version01()

  // Sub-modules, and any changes to those submodules:
  environment: cellmlmod_environment()
  total_cytoplasmic_Ca_flux: cellmlmod_total_cytoplasmic_Ca_flux()
  Ca_extrusion_across_the_plasma_membrane: cellmlmod_Ca_extrusion_across_the_plasma_membrane()
  Ca_uptake_by_SR_Ca_ATPase: cellmlmod_Ca_uptake_by_SR_Ca_ATPase()
  ER_Ca_release: cellmlmod_ER_Ca_release()
  cytoplasmic_calcium: cellmlmod_cytoplasmic_calcium()
  intraluminal_calcium: cellmlmod_intraluminal_calcium()
  total_cytoplasmic_Ca_flux.time is environment.time;
  Ca_extrusion_across_the_plasma_membrane.time is environment.time;
  Ca_uptake_by_SR_Ca_ATPase.time is environment.time;
  ER_Ca_release.time is environment.time;
  cytoplasmic_calcium.time is environment.time;
  intraluminal_calcium.time is environment.time;
  total_cytoplasmic_Ca_flux.J_ICa is Ca_extrusion_across_the_plasma_membrane.J_ICa;
  total_cytoplasmic_Ca_flux.v_i is intraluminal_calcium.v_i;
  total_cytoplasmic_Ca_flux.k_i is intraluminal_calcium.k_i;
  Ca_extrusion_across_the_plasma_membrane.Ca_i is cytoplasmic_calcium.Ca_i;
  Ca_extrusion_across_the_plasma_membrane.J_pm is cytoplasmic_calcium.J_pm;
  Ca_uptake_by_SR_Ca_ATPase.Ca_i is cytoplasmic_calcium.Ca_i;
  Ca_uptake_by_SR_Ca_ATPase.J_SERCA is ER_Ca_release.J_SERCA;
  ER_Ca_release.J_SERCA is intraluminal_calcium.J_SERCA;
  ER_Ca_release.J_ER is cytoplasmic_calcium.J_ER;
  ER_Ca_release.Ca_i is cytoplasmic_calcium.Ca_i;
  cytoplasmic_calcium.J_ER is intraluminal_calcium.J_ER;
  ER_Ca_release.Ca_ER is intraluminal_calcium.Ca_ER;
  cytoplasmic_calcium.Ca_i is intraluminal_calcium.Ca_i;
end
