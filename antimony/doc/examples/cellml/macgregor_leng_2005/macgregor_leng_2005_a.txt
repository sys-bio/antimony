//Created by libAntimony v1.4
model macgregor_model_2005__environment(time_)
end

model macgregor_model_2005__r(r, time_)

  // Assignment Rules:
  Ir := piecewise( 0.0 , ( time_ >= 0.0) && (time_ <= 90.0 ), 10.0 , ( time_ >= 91.0) && (time_ <= 92.0 ), 0.0 , ( time_ >= 93.0) && (time_ <= 113.0 ), 10.0 , ( time_ >= 114.0) && (time_ <= 115.0 ), 0.0 , ( time_ >= 116.0) && (time_ <= 136.0 ), 10.0 , ( time_ >= 137.0) && (time_ <= 138.0 ), 0.0 , ( time_ >= 139.0) && (time_ <= 159.0 ), 10.0 , ( time_ >= 160.0) && (time_ <= 161.0 ), 0.0 , ( time_ >= 162.0) && (time_ <= 252.0 ), 10.0 , ( time_ >= 253.0) && (time_ <= 254.0 ), 0.0 , ( time_ >= 255.0) && (time_ <= 275.0 ), 10.0 , ( time_ >= 276.0) && (time_ <= 277.0 ), 0.0 , ( time_ >= 278.0) && (time_ <= 298.0 ), 10.0 , ( time_ >= 299.0) && (time_ <= 300.0 ), 0.0 , ( time_ >= 301.0) && (time_ <= 321.0 ), 10.0 , ( time_ >= 322.0) && (time_ <= 323.0 ), 0.0 );

  // Rate Rules:
  r' = Ir - k6 * r;

  // Variable initializations:
  r = 0.0;
  k6 = 5.0;
end

model macgregor_model_2005__s(s, Is_, k7, time_)

  // Rate Rules:
  s' = Is_ - k7 * s;

  // Variable initializations:
  s = 0.0;
end

model macgregor_model_2005__f(f, r, c, s, time_)

  // Assignment Rules:
  phi_b_s := 1.0 / ( 1.0 + exp(-((log( 1.0 * s ) - sb )) / delta_b ));

  // Rate Rules:
  f' = -(( k1 * ( r + c ) * f )) + ( k2 + k3 * phi_b_s ) * ( 1.0 - f );

  // Variable initializations:
  f = 0.3;
  k1 = 0.1;
  k2 = 0.002;
  k3 = 0.018;
  sb = 0.029;
  delta_b = 0.3;
end

model macgregor_model_2005__h(h, f, k8, j1, r, c, s, time_)

  // Assignment Rules:
  phi_r_s := 1.0 / ( 1.0 + exp(-((log( 1.0 * s ) - sr )) / delta_r ));

  // Rate Rules:
  h' = j1 * (( k4 + k5 * ( 1.0 - phi_r_s )) * (( r + c ) * f ) - k8 * h );

  // Variable initializations:
  h = 0.0;
  k4 = 9.0;
  k5 = 71.0;
  sr = -0.56;
  delta_r = 0.3;
end

model macgregor_model_2005__model_parameters(j1, k7, Is_, k8, c, time_)

  // Assignment Rules:
  Is_ := piecewise( 10.0 , ( time_ > 0.0) && (time_ <= 90.0 ), 0.0 , ( time_ > 90.0) && (time_ <= 180.0 ), 10.0 , ( time_ > 180.0) && (time_ <= 270.0 ), 0.0 , ( time_ > 270.0) && (time_ <= 360.0 ), 0.0 );

  // Variable initializations:
  j1 = 10;
  k7 = 5.0;
  k8 = 0.07;
  c = 0.01;
end

model macgregor_model_2005____main()

  // Sub-modules, and any changes to those submodules:
  environment: macgregor_model_2005__environment(time_);
  r: macgregor_model_2005__r(r0, time_);
  s: macgregor_model_2005__s(s0, Is_, k7, time_);
  f: macgregor_model_2005__f(f0, r0, c, s0, time_);
  h: macgregor_model_2005__h(h0, f0, k8, j1, r0, c, s0, time_);
  model_parameters: macgregor_model_2005__model_parameters(j1, k7, Is_, k8, c, time_);
end
