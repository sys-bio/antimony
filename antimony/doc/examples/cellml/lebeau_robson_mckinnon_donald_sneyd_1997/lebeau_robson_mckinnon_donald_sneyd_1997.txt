//Created by libAntimony v1.4
model lebeau_robson_mckinnon_donald_sneyd_1997_version01__environment(time_)
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__membrane(V, time_, i_CaT, i_CaL, i_K_DR, i_K_Ca, i_Leak)

  // Rate Rules:
  V' = -(( i_CaL + i_CaT + i_K_DR + i_K_Ca + i_Leak )) / Cm;

  // Variable initializations:
  Cm = 7.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__reversal_potentials(E_Ca, E_K, V, Cai)

  // Assignment Rules:
  E_Ca := V * (( Cai - Cae * exp(-(( 2.0 * F * V / ( R * T ))))) / ( 1.0 - exp(-(( 2.0 * F * V / ( R * T ))))));
  E_K := V * (( Ki - Ke * exp(-(( F * V / ( R * T ))))) / ( 1.0 - exp(-(( F * V / ( R * T ))))));

  // Variable initializations:
  Ki = 140.0;
  Ke = 5.6;
  Cae = 2.0;
  R = 8.3144;
  T = 310.15;
  F = 96485;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__L_type_calcium_channel_current_m_gate(m, V, time_)

  // Assignment Rules:
  m_infinity := 1.0 / ( 1.0 + exp(-((( V - -12.0 ) / 12.0 ))));
  tau_m := tau_m_ / (exp(( V - -60.0 ) / 22.0 ) + 2.0 * exp(-(( 2.0 * (( V - -60.0 ) / 22.0 )))));

  // Rate Rules:
  m' = ( m_infinity - m ) / tau_m;

  // Variable initializations:
  tau_m_ = 27.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__L_type_calcium_channel_current(i_CaL, E_Ca, time_, V, m)

  // Sub-modules, and any changes to those submodules:
  L_type_calcium_channel_current_m_gate: lebeau_robson_mckinnon_donald_sneyd_1997_version01__L_type_calcium_channel_current_m_gate(m, V, time_);

  // Assignment Rules:
  i_CaL := g_CaL * power( m , 2.0 ) * E_Ca;

  // Variable initializations:
  g_CaL = 9.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current_m_gate(m, V, time_)

  // Assignment Rules:
  m_infinity := 1.0 / ( 1.0 + exp(-((( V - -30.0 ) / 10.5 ))));
  tau_m := tau_m_ / (exp(( V - -60.0 ) / 22.0 ) + 2.0 * exp(-(( 2.0 * (( V - -60.0 ) / 22.0 )))));

  // Rate Rules:
  m' = ( m_infinity - m ) / tau_m;

  // Variable initializations:
  tau_m_ = 10.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current_h_gate(h, V, time_)

  // Assignment Rules:
  h_infinity := 1.0 / ( 1.0 + exp(( V - -57.0 ) / 5.0 ));

  // Rate Rules:
  h' = ( h_infinity - h ) / tau_h;

  // Variable initializations:
  tau_h = 15.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current(i_CaT, E_Ca, time_, V, m, h)

  // Sub-modules, and any changes to those submodules:
  T_type_calcium_channel_current_m_gate: lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current_m_gate(m, V, time_);
  T_type_calcium_channel_current_h_gate: lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current_h_gate(h, V, time_);

  // Variable initializations:
  g_CaT = 10.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__voltage_sensitive_potassium_current_n_gate(n, V, time_)

  // Assignment Rules:
  n_infinity := 1.0 / ( 1.0 + exp(-((( V - -20.0 ) / 4.5 ))));

  // Rate Rules:
  n' = ( n_infinity - n ) / tau_n;

  // Variable initializations:
  tau_n = 20.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__voltage_sensitive_potassium_current(i_K_DR, E_K, time_, V, n)

  // Sub-modules, and any changes to those submodules:
  voltage_sensitive_potassium_current_n_gate: lebeau_robson_mckinnon_donald_sneyd_1997_version01__voltage_sensitive_potassium_current_n_gate(n, V, time_);

  // Variable initializations:
  g_K_DR = 0.1;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__calcium_activated_potassium_current(i_K_Ca, E_K, Cai)

  // Variable initializations:
  g_K_Ca = 0.09;
  KC = 0.4;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__leak_current(i_Leak, V)

  // Variable initializations:
  g_L = 0.3;
  E_L = -67.0;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__intracellular_calcium_concentration(Cai, time_, j_exch, j_in, j_eff)

  // Variable initializations:
  f = 0.01;
  beta = 0.4;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01__intracellular_calcium_dynamics(j_exch, j_in, j_eff, Cai, i_CaL, i_CaT)

  // Assignment Rules:
  j_exch := ( Ca_eq - Cai ) / tau;
  j_in := -( alpha ) * ( i_CaL + i_CaT );
  j_eff := vp * (power( Cai , 2.0 ) / (power( Cai , 2.0 ) + power( Kp , 2.0 )));

  // Variable initializations:
  tau = 500.0;
  alpha = 7.4;
  vp = 40.0;
  Kp = 0.08;
  Ca_eq = 0.1;
end

model lebeau_robson_mckinnon_donald_sneyd_1997_version01____main()

  // Sub-modules, and any changes to those submodules:
  environment: lebeau_robson_mckinnon_donald_sneyd_1997_version01__environment(time_);
  membrane: lebeau_robson_mckinnon_donald_sneyd_1997_version01__membrane(V, time_, i_CaT, i_CaL, i_K_DR, i_K_Ca, i_Leak);
  reversal_potentials: lebeau_robson_mckinnon_donald_sneyd_1997_version01__reversal_potentials(E_Ca, E_K, V, Cai);
  L_type_calcium_channel_current: lebeau_robson_mckinnon_donald_sneyd_1997_version01__L_type_calcium_channel_current(i_CaL, E_Ca, time_, V, m);
  T_type_calcium_channel_current: lebeau_robson_mckinnon_donald_sneyd_1997_version01__T_type_calcium_channel_current(i_CaT, E_Ca, time_, V, m0, h);
  voltage_sensitive_potassium_current: lebeau_robson_mckinnon_donald_sneyd_1997_version01__voltage_sensitive_potassium_current(i_K_DR, E_K, time_, V, n);
  calcium_activated_potassium_current: lebeau_robson_mckinnon_donald_sneyd_1997_version01__calcium_activated_potassium_current(i_K_Ca, E_K, Cai);
  leak_current: lebeau_robson_mckinnon_donald_sneyd_1997_version01__leak_current(i_Leak, V);
  intracellular_calcium_concentration: lebeau_robson_mckinnon_donald_sneyd_1997_version01__intracellular_calcium_concentration(Cai, time_, j_exch, j_in, j_eff);
  intracellular_calcium_dynamics: lebeau_robson_mckinnon_donald_sneyd_1997_version01__intracellular_calcium_dynamics(j_exch, j_in, j_eff, Cai, i_CaL, i_CaT);
end
