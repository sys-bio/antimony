//Created by libAntimony v1.4
model dokos_1996__environment(time_)
end

model dokos_1996__constants(R, T, F)

  // Variable initializations:
  R = 8314.472;
  T = 310;
  F = 96485.3415;
end

model dokos_1996__membrane(E, time_, i_CaL, i_CaT, i_Na, i_K, i_f, i_p, i_NaCa, i_bNa, i_bK)

  // Assignment Rules:
  i_tot := i_CaL + i_CaT + i_Na + i_K + i_f + i_p + i_NaCa + i_bNa + i_bK;

  // Rate Rules:
  E' = -(i_tot) / C;

  // Variable initializations:
  E = -64.9;
  C = 3.2e-5;
end

model dokos_1996__reversal_potentials(E_Ca, E_Na, E_K, R, T, F, Cai, Cao, Nai, Nao, Ki, Ko)

  // Assignment Rules:
  E_Ca := R * T / (2 * F) * ln(Cao / Cai);
  E_Na := R * T / F * ln(Nao / Nai);
  E_K := R * T / F * ln(Ko / Ki);
end

model dokos_1996__L_type_calcium_current_d_gate(dL, E, time_)

  // Assignment Rules:
  dL_infinity := 1 / (1 + exp((E + 6.6 ) / -(6.6 )));

  // Rate Rules:
  dL' = (dL_infinity - dL) / tau_dL;

  // Variable initializations:
  dL = 0.0001;
  tau_dL = 0.002;
end

model dokos_1996__L_type_calcium_current_f_gate(fL, E, time_)

  // Assignment Rules:
  fL_infinity := 1 / (1 + exp((E + 25 ) / 6 ));
  tau_fL := 0.031 + 1 / (1 + exp((E + 37.6 ) / 8.1 ));

  // Rate Rules:
  fL' = (fL_infinity - fL) / tau_fL;

  // Variable initializations:
  fL = 0.1505;
end

model dokos_1996__L_type_calcium_current_f2_gate(fL2, E, Cai, time_)

  // Rate Rules:
  fL2' = alpha_fL2 * (1 - fL2) - beta_fL2 * Cai * fL2;

  // Variable initializations:
  fL2 = 0.219;
  alpha_fL2 = 3;
  beta_fL2 = 40000;
end

model dokos_1996__L_type_calcium_current(i_CaL, E_Ca, time_, E, Cai, dL, fL, fL2)

  // Sub-modules, and any changes to those submodules:
  L_type_calcium_current_d_gate: dokos_1996__L_type_calcium_current_d_gate(dL, E, time_);
  L_type_calcium_current_f_gate: dokos_1996__L_type_calcium_current_f_gate(fL, E, time_);
  L_type_calcium_current_f2_gate: dokos_1996__L_type_calcium_current_f2_gate(fL2, E, Cai, time_);

  // Assignment Rules:
  i_CaL := g_CaL * dL * fL * fL2 * (E - E_Ca + 75 );

  // Variable initializations:
  g_CaL = 0.4;
end

model dokos_1996__T_type_calcium_current_d_gate(dT, E, time_)

  // Assignment Rules:
  dT_infinity := 1 / (1 + exp((E + 23 ) / -(6.1 )));
  tau_dT := 0.0006 + 0.0054 / (1 + exp(0.03 * (E + 100 )));

  // Rate Rules:
  dT' = (dT_infinity - dT) / tau_dT;

  // Variable initializations:
  dT = 0.001;
end

model dokos_1996__T_type_calcium_current_f_gate(fT, E, time_)

  // Assignment Rules:
  fT_infinity := 1 / (1 + exp((E + 75 ) / 6.6 ));
  tau_fT := 0.001 + 0.04 / (1 + exp(0.08 * (E + 65 )));

  // Rate Rules:
  fT' = (fT_infinity - fT) / tau_fT;

  // Variable initializations:
  fT = 0.1328;
end

model dokos_1996__T_type_calcium_current(i_CaT, E_Ca, time_, E, dT, fT)

  // Sub-modules, and any changes to those submodules:
  T_type_calcium_current_d_gate: dokos_1996__T_type_calcium_current_d_gate(dT, E, time_);
  T_type_calcium_current_f_gate: dokos_1996__T_type_calcium_current_f_gate(fT, E, time_);

  // Assignment Rules:
  i_CaT := g_CaT * dT * fT * (E - E_Ca + 75 );

  // Variable initializations:
  g_CaT = 0.085;
end

model dokos_1996__fast_sodium_current_m_gate(m, E, time_)

  // Assignment Rules:
  alpha_m := 200 * (E + 34.3 ) / (1 - exp(-(0.09 ) * (E + 34.3 )));
  beta_m := 8000 * exp(-(0.15 ) * (E + 56.2 ));

  // Rate Rules:
  m' = alpha_m * (1 - m) - beta_m * m;

  // Variable initializations:
  m = 0.0139;
end

model dokos_1996__fast_sodium_current_h_gate(h, E, time_)

  // Assignment Rules:
  alpha_h := 32.4 * exp(-(0.14 ) * (E + 93.4 ));
  beta_h := 709 / (1 + 4.2 * exp(-(0.06 ) * (E + 45.4 )));

  // Rate Rules:
  h' = alpha_h * (1 - h) - beta_h * h;

  // Variable initializations:
  h = 0.0087;
end

model dokos_1996__fast_sodium_current(i_Na, E_Na, time_, E, m, h)

  // Sub-modules, and any changes to those submodules:
  fast_sodium_current_m_gate: dokos_1996__fast_sodium_current_m_gate(m, E, time_);
  fast_sodium_current_h_gate: dokos_1996__fast_sodium_current_h_gate(h, E, time_);

  // Assignment Rules:
  i_Na := g_Na * power(m, 3 ) * h * (E - E_Na);

  // Variable initializations:
  g_Na = 0.25;
end

model dokos_1996__delayed_rectifying_potassium_current_x_gate(x, E, time_)

  // Assignment Rules:
  x_infinity := 1 / (1 + exp((E + 25.1 ) / -(7.4 )));
  tau_x := 1 / (17 * exp(0.0398 * E) + 0.211 * exp(-(0.051 ) * E));

  // Rate Rules:
  x' = (x_infinity - x) / tau_x;

  // Variable initializations:
  x = 0.5682;
end

model dokos_1996__delayed_rectifying_potassium_current(i_K, i_KK, i_KNa, R, T, F, Ko, Ki, Nao, Nai, time_, E, x)

  // Sub-modules, and any changes to those submodules:
  delayed_rectifying_potassium_current_x_gate: dokos_1996__delayed_rectifying_potassium_current_x_gate(x, E, time_);

  // Assignment Rules:
  i_K := i_KK + i_KNa;
  i_KK := x * Kk * power(Ko / 1 , 0.59 ) * (Ki - Ko * exp(-(E) * F / (R * T)));
  i_KNa := x * Kk * P_KNa * power(Ko / 1 , 0.59 ) * (Nai - Nao * exp(-(E) * F / (R * T)));

  // Variable initializations:
  Kk = 0.00026;
  P_KNa = 0.035;
end

model dokos_1996__hyperpolarising_activated_current_y_gate(y, E, time_)

  // Assignment Rules:
  alpha_y := 0.36 * (E + 137.8 ) / (exp(0.066 * (E + 137.8 )) - 1 );
  beta_y := 0.1 * (E + 76.3 ) / (1 - exp(-(0.21 ) * (E + 76.3 )));

  // Rate Rules:
  y' = alpha_y * (1 - y) - beta_y * y;

  // Variable initializations:
  y = 0.0287;
end

model dokos_1996__hyperpolarising_activated_current(i_f, i_fNa, i_fK, E_Na, E_K, Ko, time_, E, y)

  // Sub-modules, and any changes to those submodules:
  hyperpolarising_activated_current_y_gate: dokos_1996__hyperpolarising_activated_current_y_gate(y, E, time_);

  // Assignment Rules:
  i_f := i_fK + i_fNa;
  i_fNa := y * power(Ko, 1.83 ) / (power(Ko, 1.83 ) + power(Kmf, 1.83 )) * g_fNa * (E - E_Na);
  i_fK := y * power(Ko, 1.83 ) / (power(Ko, 1.83 ) + power(Kmf, 1.83 )) * g_fK * (E - E_K);

  // Variable initializations:
  Kmf = 10.3;
  g_fNa = 0.0081;
  g_fK = 0.0135;
end

model dokos_1996__sodium_potassium_pump(i_p, Ko, Nai, time_, E)

  // Assignment Rules:
  i_p := i_pmax * Nai / (Nai + KmNa) * Ko / (Ko + KmK) * (1 - power((E - 40 ) / 211 , 2 ));

  // Variable initializations:
  KmNa = 40;
  KmK = 1;
  i_pmax = 0.226;
end

model dokos_1996__sodium_calcium_exchange_current(i_NaCa, Cao, Nao, Cai, Nai, time_, R, T, F, E)

  // Assignment Rules:
  i_NaCa := kNaCa * (x2 * k21 - x1 * k12) / (x1 + x2 + x3 + x4);
  x1 := k41 * k34 * (k23 + k21) + k21 * k32 * (k43 + k41);
  x2 := k32 * k43 * (k14 + k12) + k41 * k12 * (k34 + k32);
  x3 := k14 * k43 * (k23 + k21) + k12 * k23 * (k43 + k41);
  x4 := k23 * k34 * (k14 + k12) + k14 * k21 * (k34 + k32);
  k41 := exp(-(Qn) * E * F / (2 * R * T));
  k34 := Nao / (K3no + Nao);
  k23 := (power(Nao, 2 ) / (K1no * K2no) + power(Nao, 3 ) / (K1no * K2no * K3no)) * exp(-(Qn) * E * F / (2 * R * T)) / do;
  k21 := Cao / Kco * exp(-(Qco) * E * F / (R * T)) / do;
  k32 := exp(Qn * E * F / (2 * R * T));
  k43 := Nai / (K3ni + Nai);
  k12 := Cai / Kci * exp(-(Qci) * E * F / (R * T)) / di;
  k14 := (power(Nai, 2 ) / (K1ni * K2ni) + power(Nai, 3 ) / (K1ni * K2ni * K3ni)) * exp(Qn * E * F / (2 * R * T)) / di;
  do := 1 + Cao / Kco + Cao / Kco * exp(Qco * E * F / (R * T)) + Nao / K1no + power(Nao, 2 ) / (K1no * K2no) + power(Nao, 3 ) / (K1no * K2no * K3no);
  di := 1 + Cai / Kci + Cai / Kci * exp(-(Qci) * E * F / (R * T)) + Cai * Nai / (Kci * Kcni) + Nai / K1ni + power(Nai, 2 ) / (K1ni * K2ni) + power(Nai, 3 ) / (K1ni * K2ni * K3ni);

  // Variable initializations:
  kNaCa = 4;
  Qci = 0.1369;
  Qn = 0.4315;
  Qco = 0;
  K3ni = 26.44;
  Kci = 0.0207;
  K1ni = 395.3;
  K2ni = 2.289;
  Kcni = 26.44;
  K3no = 4.663;
  K1no = 1628;
  K2no = 561.4;
  Kco = 3.663;
end

model dokos_1996__background_sodium_current(i_bNa, time_, E, E_Na)

  // Assignment Rules:
  i_bNa := g_Nab * (E - E_Na);

  // Variable initializations:
  g_Nab = 0.00024;
end

model dokos_1996__background_potassium_current(i_bK, time_, E, R, T, F, Ki, Ko)

  // Assignment Rules:
  i_bK := KbK * power(Ko / 1 , 0.41 ) * (Ki - Ko * exp(-(E) * F / (R * T)));

  // Variable initializations:
  KbK = 0.00007;
end

model dokos_1996__sarcoplasmic_reticulum_kinetics(i_up, i_tr, i_rel, V_i, V_rel, V_up, time_, F, Cai, Caup, Carel)

  // Assignment Rules:
  i_up := i_up_max * power(Cai, 2 ) / (power(Cai, 2 ) + power(KmCaup, 2 ));
  i_tr := 2 * 1 * V_rel * F / (1 * tau_tr) * Caup;
  i_rel := 2 * 1 * V_rel * F / (1 * tau_rel) * Carel * power(Cai, 2 ) / (power(Cai, 2 ) + power(KmCarel, 2 ));
  V_rel := 0.006 * V_i;
  V_up := 0.014 * V_i;

  // Variable initializations:
  i_up_max = 0.0212;
  KmCaup = 0.0005;
  KmCarel = 0.001;
  tau_rel = 0.005;
  tau_tr = 0.4;
end

model dokos_1996__ion_concentrations(Cai, Cao, Caup, Carel, Nai, Nao, Ki, Ko, V_i, time_, F, i_bNa, i_fNa, i_Na, i_p, i_NaCa, i_KNa, i_KK, i_fK, i_bK, i_CaL, i_CaT, i_up, i_rel, i_tr, V_rel, V_up)

  // Assignment Rules:
  V_e := 0.2 * V_i;

  // Rate Rules:
  Cai' = -(1 ) * (i_CaL + i_CaT - 2 * i_NaCa + i_up + -(i_rel)) / (2 * F * 1 * V_i);
  Cao' = 1 * (i_CaL + i_CaT - 2 * i_NaCa) / (2 * F * 1 * V_e) + (Cab - Cao) / tau_b;
  Caup' = 1 * (i_up - i_tr) / (2 * 1 * V_up * F);
  Carel' = 1 * (i_tr - i_rel) / (2 * 1 * V_rel * F);
  Nai' = -(1 ) * (i_bNa + i_fNa + i_Na + 3 * i_p + 3 * i_NaCa + i_KNa) / (F * 1 * V_i);
  Nao' = 1 * (i_bNa + i_fNa + i_Na + 3 * i_p + 3 * i_NaCa + i_KNa) / (F * 1 * V_e) + (Nab - Nao) / tau_b;
  Ki' = -(1 ) * (i_KK + i_fK - 2 * i_p + i_bK) / (F * 1 * V_i);
  Ko' = 1 * (i_KK + i_fK - 2 * i_p + i_bK) / (F * 1 * V_e) + (Kb - Ko) / tau_b;

  // Variable initializations:
  Cai = 0.000034;
  Cao = 2.0004;
  Caup = 0.5832;
  Carel = 0.1101;
  Nai = 7.4994;
  Nao = 139.9929;
  Ki = 140.0073;
  Ko = 5.4243;
  V_i = 2.5e-6;
  tau_b = 0.1;
  Nab = 140;
  Cab = 2;
  Kb = 5.4;
end

model dokos_1996____main()

  // Sub-modules, and any changes to those submodules:
  environment: dokos_1996__environment(time_);
  constants: dokos_1996__constants(R, T, F);
  membrane: dokos_1996__membrane(E, time_, i_CaL, i_CaT, i_Na, i_K, i_f, i_p, i_NaCa, i_bNa, i_bK);
  reversal_potentials: dokos_1996__reversal_potentials(E_Ca, E_Na, E_K, R, T, F, Cai, Cao, Nai, Nao, Ki, Ko);
  L_type_calcium_current: dokos_1996__L_type_calcium_current(i_CaL, E_Ca, time_, E, Cai, dL, fL, fL2);
  T_type_calcium_current: dokos_1996__T_type_calcium_current(i_CaT, E_Ca, time_, E, dT, fT);
  fast_sodium_current: dokos_1996__fast_sodium_current(i_Na, E_Na, time_, E, m, h);
  delayed_rectifying_potassium_current: dokos_1996__delayed_rectifying_potassium_current(i_K, i_KK, i_KNa, R, T, F, Ko, Ki, Nao, Nai, time_, E, x);
  hyperpolarising_activated_current: dokos_1996__hyperpolarising_activated_current(i_f, i_fNa, i_fK, E_Na, E_K, Ko, time_, E, y);
  sodium_potassium_pump: dokos_1996__sodium_potassium_pump(i_p, Ko, Nai, time_, E);
  sodium_calcium_exchange_current: dokos_1996__sodium_calcium_exchange_current(i_NaCa, Cao, Nao, Cai, Nai, time_, R, T, F, E);
  background_sodium_current: dokos_1996__background_sodium_current(i_bNa, time_, E, E_Na);
  background_potassium_current: dokos_1996__background_potassium_current(i_bK, time_, E, R, T, F, Ki, Ko);
  sarcoplasmic_reticulum_kinetics: dokos_1996__sarcoplasmic_reticulum_kinetics(i_up, i_tr, i_rel, V_i, V_rel, V_up, time_, F, Cai, Caup, Carel);
  ion_concentrations: dokos_1996__ion_concentrations(Cai, Cao, Caup, Carel, Nai, Nao, Ki, Ko, V_i, time_, F, i_bNa, i_fNa, i_Na, i_p, i_NaCa, i_KNa, i_KK, i_fK, i_bK, i_CaL, i_CaT, i_up, i_rel, i_tr, V_rel, V_up);
end
