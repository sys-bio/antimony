//Created by libAntimony v1.3
model izakov_katsnelson_blyakhman_markhasin_shkylar_1991__environment(time_)
end

model izakov_katsnelson_blyakhman_markhasin_shkylar_1991__equations(time_, l_1, l_2, dl_1_dt)

  // Assignment Rules:
  P_CE := lambda_ * S * A_1 * n * p_V;
  P_PE := beta_2 * (exp(alpha_2 * l_2) - 1 );
  P_SE := beta_1 * (exp(alpha_1 * (l_2 - l_1)) - 1 );
  Ca := piecewise( Ca_m * power(1 - exp(-(a_c) * power(time_, 2 )), 2 ) , time_ <= t_d , Ca_m * power((1 - exp(-(a_c) * power(time_, 2 ))) * exp(-(b_c) * power(time_ - t_d, 2 )), 2 ) );
  C_2 := C_20 * pi_n * phi_A_1;
  phi_A_1 := exp(-(q_k) * A_1);
  pi_n := piecewise( pi_min , ( 0.75 <= n) && (n <= 1 ), power(pi_min, 2 * n - 0.5 ) , ( 0.25 <= n) && (n < 0.75 ), 1 );
  A := A_1 * S / 1;
  S := 0.5 * l_1 + S_0;
  n := n_1 * n_2;
  n_1 := piecewise( 0 , g_1 * l_1 + g_2 < 0 , g_1 * l_1 + g_2 , ( 0 <= g_1 * l_1 + g_2) && (g_1 * l_1 + g_2 <= 1 ), 1 );
  G_V := 1 + 0.6 * V / V_max;
  q_V := piecewise( q_1 - q_2 * V / V_max , V <= 0 , q_3 );
  V := -(dl_1_dt);
  F_V := a * (1 + V / V_max) / (a - V / V_max);
  p_V := F_V / G_V;
  V_1 := 0.1 * V_max;

  // Rate Rules:
  A_1' = C_1 * Ca * (TnC - A_1) - C_20 * pi_n * phi_A_1 * A_1;
  n_2' = q_V * (m_0 * G_V - n_2);

  // Variable initializations:
  A_1 = 0;
  n_2 = 0;
  alpha_1 = 14.6;
  alpha_2 = 14.6;
  beta_1 = 1;
  beta_2 = 0.0012;
  lambda_ = 30;
  V_max = 0.0043;
  Ca_m = 45e-3;
  t_d = 170;
  a_c = 2.4e-4;
  b_c = 5e-4;
  C_1 = 2.9e-2;
  C_20 = 0.2;
  q_k = 4;
  a = 0.25;
  m_0 = 0.87;
  g_1 = 0.4;
  g_2 = 0.6;
  pi_min = 5e-2;
  S_0 = 0.77;
  q_1 = 0.017;
  q_2 = 0.26;
  q_3 = 0.03;
  TnC = 1;
end

model izakov_katsnelson_blyakhman_markhasin_shkylar_1991__user_defined(l_1, l_2, dl_1_dt, time_)

  // Assignment Rules:
  l_1 := piecewise( 0 , ( 200 <= time_) && (time_ <= 201 ), 0 );
  l_2 := l_1 + 1.87;
  dl_1_dt := 0;
end

model izakov_katsnelson_blyakhman_markhasin_shkylar_1991____main()

  // Sub-modules, and any changes to those submodules:
  environment: izakov_katsnelson_blyakhman_markhasin_shkylar_1991__environment(time_);
  equations: izakov_katsnelson_blyakhman_markhasin_shkylar_1991__equations(time_, l_1, l_2, dl_1_dt);
  user_defined: izakov_katsnelson_blyakhman_markhasin_shkylar_1991__user_defined(l_1, l_2, dl_1_dt, time_);
end
