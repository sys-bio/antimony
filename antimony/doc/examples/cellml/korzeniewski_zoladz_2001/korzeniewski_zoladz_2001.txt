//Created by libAntimony v1.4

//Warnings from automatic translation:
//    Unable to use the formula "electric_potential / protonmotive_force" to set the assignment rule for u:  Loop detected:  u's definition (electric_potential / protonmotive_force) either includes itself directly (i.e. 's5 := 6 + s5') or by proxy (i.e. 's5 := 8*d3' and 'd3 := 9*s5').

model korzeniewski_zoladz_2001__environment(time_)
end

model korzeniewski_zoladz_2001__cell(R_cm, R, T, F, S, Z, electric_potential, protonmotive_force, ex_membrane_potential, in_membrane_potential, pH_e, pH_i, pKa, He, Hi, r_buffi, r_buffe, BN, u)

  // Assignment Rules:
  S := 2.303 * R * T;
  Z := 2.303 * R * (T / F);
  electric_potential := -((protonmotive_force - delta_pH));
  protonmotive_force := 1.0 / ((1.0 - u) * delta_pH);
  ex_membrane_potential := -0.35 * electric_potential;
  in_membrane_potential := 0.65 * electric_potential;
  pH_e := -(log(He / 1000000.0 ));
  pH_i := -(log(Hi / 1000000.0 ));
  delta_pH := Z * (pH_i - pH_e);
  C0_i := (power(10.0 , -(pH_i)) - power(10.0 , -(pH_i) - dpH)) / dpH;
  C0_e := (power(10.0 , -(pH_e)) - power(10.0 , -(pH_e) - dpH)) / dpH;
  r_buffi := c_buffi / C0_i;
  r_buffe := c_buffe / C0_e;

  // Variable initializations:
  R_cm = 15.0;
  R = 0.0083;
  T = 289.0;
  F = 0.0965;
  c_buffi = 0.022;
  c_buffe = 0.025;
  pKa = 6.8;
  dpH = 0.001;
  BN = 5.0;
end

model korzeniewski_zoladz_2001__redox_potentials(EmN, EmU, Emc, Ema, Z, NAD, NADH, UQ, UQH2, c_2, c_3, protonmotive_force, u)

  // Assignment Rules:
  EmN := EmN0 + Z / 2.0 * log(NAD / NADH);
  EmU := EmU0 + Z / 2.0 * log(UQ / UQH2);
  Emc := Emc0 + Z * log(c_3 / c_2);
  Ema := Emc + protonmotive_force * ((2.0 + 2.0 * u) / 2.0 );

  // Variable initializations:
  EmN0 = -320.0;
  EmU0 = 85.0;
  Emc0 = 250.0;
end

model korzeniewski_zoladz_2001__NAD(NAD, NADH)

  // Assignment Rules:
  NAD := Nt - NADH;

  // Variable initializations:
  Nt = 2970.0;
end

model korzeniewski_zoladz_2001__NADH(NADH, BN, R_cm, vDH, vC1, time_)

  // Rate Rules:
  NADH' = (vDH - vC1) * (R_cm / BN);
end

model korzeniewski_zoladz_2001__O2(O2, vC4, time_)

  // Rate Rules:
  O2' = -(vC4);
end

model korzeniewski_zoladz_2001__Hi(Hi, r_buffi, u, nA, vC4, vC1, vC3, vSN, vEX, vPI, vLK, R_cm, time_)

  // Rate Rules:
  Hi' = ((4.0 - 2.0 * u) * vC3 + 4.0 * vC1 - (2.0 * (2.0 + 2.0 * u) * vC4 + nA * vSN + u * vEX + (1.0 - u) * vPI + vLK)) * R_cm / r_buffi;
end

model korzeniewski_zoladz_2001__He(He, r_buffe, u, nA, vC4, vC1, vC3, vCK, vEFF, vSN, vEX, vPI, vLK, time_)

  // Rate Rules:
  He' = (2.0 * (2.0 + 2.0 * u) * vC4 + (4.0 - 2.0 * u) * vC3 + 4.0 * vC1 - (nA * vSN + u * vEX + (1.0 - u) * vPI + vLK + vCK + vEFF)) / r_buffe;
end

model korzeniewski_zoladz_2001__ADP_mi(ADP_mi, ADP_ti, ADP_fi)

  // Assignment Rules:
  ADP_mi := ADP_ti - ADP_fi;
end

model korzeniewski_zoladz_2001__ADP_fi(ADP_fi, ADP_ti, Mg_fi, time_)

  // Assignment Rules:
  ADP_fi := ADP_ti / (1.0 + Mg_fi / kDDi);

  // Variable initializations:
  kDDi = 282;
end

model korzeniewski_zoladz_2001__ADP_ti(ADP_ti, ATP_ti)

  // Assignment Rules:
  ADP_ti := Ai_SUM - ATP_ti;

  // Variable initializations:
  Ai_SUM = 16260.0;
end

model korzeniewski_zoladz_2001__ATP_mi(ATP_mi, ATP_ti, ATP_fi)

  // Assignment Rules:
  ATP_mi := ATP_ti - ATP_fi;
end

model korzeniewski_zoladz_2001__ATP_fi(ATP_fi, ATP_ti, Mg_fi)

  // Assignment Rules:
  ATP_fi := ATP_ti / (1.0 + Mg_fi / kDTi);

  // Variable initializations:
  kDTi = 17;
end

model korzeniewski_zoladz_2001__ATP_ti(ATP_ti, R_cm, vSN, vEX, time_)

  // Rate Rules:
  ATP_ti' = (vSN - vEX) * R_cm;
end

model korzeniewski_zoladz_2001__ADP_me(ADP_me, ADP_te, ADP_fe)

  // Assignment Rules:
  ADP_me := ADP_te - ADP_fe;
end

model korzeniewski_zoladz_2001__ADP_fe(ADP_fe, ADP_te, Mg_fe)

  // Assignment Rules:
  ADP_fe := ADP_te / (1.0 + Mg_fe / kDDe);

  // Variable initializations:
  kDDe = 347;
end

model korzeniewski_zoladz_2001__ADP_te(ADP_te, vUT, vEX, vAK, vCK, time_)

  // Rate Rules:
  ADP_te' = vUT - (vEX + 2.0 * vAK + vCK);
end

model korzeniewski_zoladz_2001__ATP_me(ATP_me, ATP_te, ATP_fe)

  // Assignment Rules:
  ATP_me := ATP_te - ATP_fe;
end

model korzeniewski_zoladz_2001__ATP_fe(ATP_fe, ATP_te, Mg_fe)

  // Assignment Rules:
  ATP_fe := ATP_te / (1.0 + Mg_fe / kDTe);

  // Variable initializations:
  kDTe = 24;
end

model korzeniewski_zoladz_2001__ATP_te(ATP_te, vUT, vEX, vAK, vCK, time_)

  // Rate Rules:
  ATP_te' = vEX + vAK + vCK - vUT;
end

model korzeniewski_zoladz_2001__AMP_e(AMP_e, ATP_te, ADP_te)

  // Assignment Rules:
  AMP_e := Ae_SUM - (ATP_te + ADP_te);

  // Variable initializations:
  Ae_SUM = 1600.2;
end

model korzeniewski_zoladz_2001__Cr(Cr, PCr)

  // Assignment Rules:
  Cr := C_SUM - PCr;

  // Variable initializations:
  C_SUM = 35000.0;
end

model korzeniewski_zoladz_2001__PCr(PCr, vCK, time_)

  // Rate Rules:
  PCr' = -(vCK);
end

model korzeniewski_zoladz_2001__Pi_ji(Pi_ji, Pi_ti, pH_i, pKa, time_)

  // Assignment Rules:
  Pi_ji := Pi_ti / (1.0 + power(10.0 , pH_i - pKa));
end

model korzeniewski_zoladz_2001__Pi_je(Pi_je, Pi_te, pH_e, pKa, time_)

  // Assignment Rules:
  Pi_je := Pi_te / (1.0 + power(10.0 , pH_e - pKa));
end

model korzeniewski_zoladz_2001__Pi_ti(Pi_ti, vPI, vSN, R_cm, time_)

  // Rate Rules:
  Pi_ti' = (vPI - vSN) * R_cm;
end

model korzeniewski_zoladz_2001__Pi_te(Pi_te, vUT, vPI, time_)

  // Rate Rules:
  Pi_te' = vUT - vPI;
end

model korzeniewski_zoladz_2001__Mg_fe(Mg_fe)

  // Variable initializations:
  Mg_fe = 4000.0;
end

model korzeniewski_zoladz_2001__Mg_fi(Mg_fi)

  // Variable initializations:
  Mg_fi = 380.0;
end

model korzeniewski_zoladz_2001__P_SUM(P_SUM, Pi_ti, Pi_te, PCr, ATP_te, ADP_te, AMP_e, ATP_ti, ADP_ti, R_cm, time_)

  // Assignment Rules:
  P_SUM := PCr + ATP_te * 3.0 + ADP_te * 2.0 + AMP_e + Pi_te + (ATP_ti * 3.0 + ADP_ti * 2.0 + Pi_ti) / R_cm;
end

model korzeniewski_zoladz_2001__c_2(c_2, R_cm, vC3, vC4, time_)

  // Rate Rules:
  c_2' = (vC3 + vC4 * 2.0 ) * R_cm * 2.0;
end

model korzeniewski_zoladz_2001__c_3(c_3, c_2)

  // Assignment Rules:
  c_3 := ct - c_2;

  // Variable initializations:
  ct = 270.0;
end

model korzeniewski_zoladz_2001__UQ(UQ, UQH2)

  // Assignment Rules:
  UQ := Ut - UQH2;

  // Variable initializations:
  Ut = 1350.0;
end

model korzeniewski_zoladz_2001__UQH2(UQH2, R_cm, vC1, vC3, time_)

  // Rate Rules:
  UQH2' = R_cm * (vC1 - vC3);
end

model korzeniewski_zoladz_2001__a_2(a_2, at_, Ema, Z, time_)

  // Assignment Rules:
  A3_2 := power(10.0 , (Ema - Ema0) / Z);

  // Rate Rules:
  a_2' = at_ / (1.0 + A3_2);

  // Variable initializations:
  Ema0 = 540.0;
  at_ = 135.0;
end

model korzeniewski_zoladz_2001__a_3(a_3, at_, a_2)

  // Assignment Rules:
  a_3 := at_ - a_2;
end

model korzeniewski_zoladz_2001__vDH(vDH, NAD, NADH)

  // Assignment Rules:
  vDH := kDH * (1.0 / power(1.0 + KmN / ( NAD / NADH ), pD ));

  // Variable initializations:
  kDH = 28074;
  KmN = 100.0;
  pD = 0.8;
end

model korzeniewski_zoladz_2001__vC1(vC1, EmN, EmU, protonmotive_force)

  // Assignment Rules:
  vC1 := kC1 * delta_GC1;
  delta_GC1 := EmU - ( EmN + protonmotive_force * (4.0 / 2.0 ));

  // Variable initializations:
  kC1 = 238.95;
end

model korzeniewski_zoladz_2001__vC3(vC3, Emc, u, EmU, protonmotive_force)

  // Assignment Rules:
  vC3 := kC3 * delta_GC3;
  delta_GC3 := Emc - ( EmU + protonmotive_force * ((4.0 - 2.0 * u ) / 2.0 ));

  // Variable initializations:
  kC3 = 136.41;
end

model korzeniewski_zoladz_2001__vC4(vC4, O2, c_2, a_2)

  // Assignment Rules:
  vC4 := kC4 * a_2 * c_2 * (1.0 / (1.0 + KmO / O2 ));

  // Variable initializations:
  kC4 = 136.41;
  KmO = 120.0;
end

model korzeniewski_zoladz_2001__vSN(vSN, nA, Z, Emc, u, EmU, protonmotive_force, ATP_ti, ADP_ti, Pi_ti, F)

  // Assignment Rules:
  vSN := kSN * (( gamma - 1.0 ) / ( gamma + 1.0 ));
  delta_GSN := nA * protonmotive_force - delta_Gp;
  delta_Gp := delta_Gp0 / ( F + Z * log(1000000.0 * ( ATP_ti / ( ADP_ti * Pi_ti ))));
  gamma := power(10.0 , delta_GSN / Z );

  // Variable initializations:
  nA = 2.5;
  kSN = 34316.0;
  delta_Gp0 = 31.9;
end

model korzeniewski_zoladz_2001__vEX(vEX, Z, ATP_fi, ADP_fe, ADP_fi, ATP_fe, in_membrane_potential)

  // Assignment Rules:
  vEX := kEX * (ADP_fe / (ADP_fe + ATP_fe * power(10.0 , -(in_membrane_potential) / Z)) - ADP_fi / (ADP_fi + ATP_fi * power(10.0 , -(in_membrane_potential) / Z))) * (1.0 / (1.0 + km_ADP / ADP_fe));

  // Variable initializations:
  kEX = 54572;
  km_ADP = 3.5;
end

model korzeniewski_zoladz_2001__vUT(vUT, ATP_te)

  // Assignment Rules:
  vUT := kUT * (1.0 / (1.0 + km_A / ATP_te));

  // Variable initializations:
  km_A = 150.0;
  kUT = 686.5;
end

model korzeniewski_zoladz_2001__vAK(vAK, ADP_fe, ADP_me, ATP_me, AMP_e)

  // Assignment Rules:
  vAK := kf_AK * ADP_me * ADP_fe - kb_AK * ATP_me * AMP_e;

  // Variable initializations:
  kf_AK = 862.10;
  kb_AK = 22.747;
end

model korzeniewski_zoladz_2001__vLK(vLK, protonmotive_force)

  // Assignment Rules:
  vLK := kL1 * (exp(kL2 * protonmotive_force) - 1.0 );

  // Variable initializations:
  kL1 = 2.5;
  kL2 = 0.038;
end

model korzeniewski_zoladz_2001__vPI(vPI, Pi_je, He, Pi_ji, Hi)

  // Assignment Rules:
  vPI := kPI * (He * Pi_je - Hi * Pi_ji);

  // Variable initializations:
  kPI = 69.421;
end

model korzeniewski_zoladz_2001__vCK(vCK, ATP_te, He, ADP_te, Cr, PCr)

  // Assignment Rules:
  vCK := kf_CK * ADP_te * PCr * He - kb_CK * ATP_te * Cr;

  // Variable initializations:
  kf_CK = 1.9258;
  kb_CK = 0.00087538;
end

model korzeniewski_zoladz_2001__vEFF(vEFF, pH_e)

  // Assignment Rules:
  vEFF := k_EFF * (pH_o - pH_e);

  // Variable initializations:
  pH_o = 7.0;
  k_EFF = 1.9258;
end

model korzeniewski_zoladz_2001____main()

  // Sub-modules, and any changes to those submodules:
  environment: korzeniewski_zoladz_2001__environment(time_);
  cell: korzeniewski_zoladz_2001__cell(R_cm, R, T, F, S, Z, electric_potential, protonmotive_force, ex_membrane_potential, in_membrane_potential, pH_e, pH_i, pKa, He0, Hi0, r_buffi, r_buffe, BN, u);
  redox_potentials: korzeniewski_zoladz_2001__redox_potentials(EmN, EmU, Emc, Ema, Z, NAD0, NADH0, UQ0, UQH20, c_20, c_30, protonmotive_force, u);
  NAD: korzeniewski_zoladz_2001__NAD(NAD0, NADH0);
  NADH: korzeniewski_zoladz_2001__NADH(NADH0, BN, R_cm, vDH0, vC10, time_);
  O2: korzeniewski_zoladz_2001__O2(O20, vC40, time_);
  Hi: korzeniewski_zoladz_2001__Hi(Hi0, r_buffi, u, nA, vC40, vC10, vC30, vSN0, vEX0, vPI0, vLK0, R_cm, time_);
  He: korzeniewski_zoladz_2001__He(He0, r_buffe, u, nA, vC40, vC10, vC30, vCK0, vEFF0, vSN0, vEX0, vPI0, vLK0, time_);
  ADP_mi: korzeniewski_zoladz_2001__ADP_mi(ADP_mi0, ADP_ti0, ADP_fi0);
  ADP_fi: korzeniewski_zoladz_2001__ADP_fi(ADP_fi0, ADP_ti0, Mg_fi0, time_);
  ADP_ti: korzeniewski_zoladz_2001__ADP_ti(ADP_ti0, ATP_ti0);
  ATP_mi: korzeniewski_zoladz_2001__ATP_mi(ATP_mi0, ATP_ti0, ATP_fi0);
  ATP_fi: korzeniewski_zoladz_2001__ATP_fi(ATP_fi0, ATP_ti0, Mg_fi0);
  ATP_ti: korzeniewski_zoladz_2001__ATP_ti(ATP_ti0, R_cm, vSN0, vEX0, time_);
  ADP_me: korzeniewski_zoladz_2001__ADP_me(ADP_me0, ADP_te0, ADP_fe0);
  ADP_fe: korzeniewski_zoladz_2001__ADP_fe(ADP_fe0, ADP_te0, Mg_fe0);
  ADP_te: korzeniewski_zoladz_2001__ADP_te(ADP_te0, vUT0, vEX0, vAK0, vCK0, time_);
  ATP_me: korzeniewski_zoladz_2001__ATP_me(ATP_me0, ATP_te0, ATP_fe0);
  ATP_fe: korzeniewski_zoladz_2001__ATP_fe(ATP_fe0, ATP_te0, Mg_fe0);
  ATP_te: korzeniewski_zoladz_2001__ATP_te(ATP_te0, vUT0, vEX0, vAK0, vCK0, time_);
  AMP_e: korzeniewski_zoladz_2001__AMP_e(AMP_e0, ATP_te0, ADP_te0);
  Cr: korzeniewski_zoladz_2001__Cr(Cr0, PCr0);
  PCr: korzeniewski_zoladz_2001__PCr(PCr0, vCK0, time_);
  Pi_ji: korzeniewski_zoladz_2001__Pi_ji(Pi_ji0, Pi_ti0, pH_i, pKa, time_);
  Pi_je: korzeniewski_zoladz_2001__Pi_je(Pi_je0, Pi_te0, pH_e, pKa, time_);
  Pi_ti: korzeniewski_zoladz_2001__Pi_ti(Pi_ti0, vPI0, vSN0, R_cm, time_);
  Pi_te: korzeniewski_zoladz_2001__Pi_te(Pi_te0, vUT0, vPI0, time_);
  Mg_fe: korzeniewski_zoladz_2001__Mg_fe(Mg_fe0);
  Mg_fi: korzeniewski_zoladz_2001__Mg_fi(Mg_fi0);
  P_SUM: korzeniewski_zoladz_2001__P_SUM(P_SUM0, Pi_ti0, Pi_te0, PCr0, ATP_te0, ADP_te0, AMP_e0, ATP_ti0, ADP_ti0, R_cm, time_);
  c_2: korzeniewski_zoladz_2001__c_2(c_20, R_cm, vC30, vC40, time_);
  c_3: korzeniewski_zoladz_2001__c_3(c_30, c_20);
  UQ: korzeniewski_zoladz_2001__UQ(UQ0, UQH20);
  UQH2: korzeniewski_zoladz_2001__UQH2(UQH20, R_cm, vC10, vC30, time_);
  a_2: korzeniewski_zoladz_2001__a_2(a_20, at_, Ema, Z, time_);
  a_3: korzeniewski_zoladz_2001__a_3(a_30, at_, a_20);
  vDH: korzeniewski_zoladz_2001__vDH(vDH0, NAD0, NADH0);
  vC1: korzeniewski_zoladz_2001__vC1(vC10, EmN, EmU, protonmotive_force);
  vC3: korzeniewski_zoladz_2001__vC3(vC30, Emc, u, EmU, protonmotive_force);
  vC4: korzeniewski_zoladz_2001__vC4(vC40, O20, c_20, a_20);
  vSN: korzeniewski_zoladz_2001__vSN(vSN0, nA, Z, Emc, u, EmU, protonmotive_force, ATP_ti0, ADP_ti0, Pi_ti0, F);
  vEX: korzeniewski_zoladz_2001__vEX(vEX0, Z, ATP_fi0, ADP_fe0, ADP_fi0, ATP_fe0, in_membrane_potential);
  vUT: korzeniewski_zoladz_2001__vUT(vUT0, ATP_te0);
  vAK: korzeniewski_zoladz_2001__vAK(vAK0, ADP_fe0, ADP_me0, ATP_me0, AMP_e0);
  vLK: korzeniewski_zoladz_2001__vLK(vLK0, protonmotive_force);
  vPI: korzeniewski_zoladz_2001__vPI(vPI0, Pi_je0, He0, Pi_ji0, Hi0);
  vCK: korzeniewski_zoladz_2001__vCK(vCK0, ATP_te0, He0, ADP_te0, Cr0, PCr0);
  vEFF: korzeniewski_zoladz_2001__vEFF(vEFF0, pH_e);
end
