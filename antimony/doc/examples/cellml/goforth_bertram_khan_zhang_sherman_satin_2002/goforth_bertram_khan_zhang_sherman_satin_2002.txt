//Created by libAntimony v1.3

//Warnings from automatic translation:
//    Unable to use the formula "0.1 * V_SS" to set the assignment rule for V_ER:  Loop detected:  V_ER's definition (0.1 * V_SS) either includes itself directly (i.e. 's5 := 6 + s5') or by proxy (i.e. 's5 := 8*d3' and 'd3 := 9*s5').

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__environment(time_)
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__membrane(V, time_, i_Ca, i_K, i_KATP, i_KCa, i_Leak)

  // Rate Rules:
  V' = -(( i_Ca + i_K + i_KATP + i_KCa + i_Leak )) / Cm;

  // Variable initializations:
  V = -65.0;
  Cm = 5300.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_current_m_gate(m_infinity, V, time_)

  // Assignment Rules:
  m_infinity := 1.0 / ( 1.0 + exp(( Vm - V ) / Sm ));

  // Variable initializations:
  Vm = -13.0;
  Sm = 8.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_current(i_Ca, time_, V, m_infinity)

  // Sub-modules, and any changes to those submodules:
  calcium_current_m_gate: goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_current_m_gate(m_infinity, V, time_);

  // Assignment Rules:
  i_Ca := g_Ca * m_infinity * ( V - V_Ca );

  // Variable initializations:
  V_Ca = 30.0;
  g_Ca = 1450.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__rapidly_activating_K_current_n_gate(n, V, time_)

  // Assignment Rules:
  n_infinity := 1.0 / ( 1.0 + exp(( Vn - V ) / Sn ));

  // Rate Rules:
  n' = ( n_infinity - n ) / tau_n;

  // Variable initializations:
  n = 0.0001;
  tau_n = 10.8;
  Vn = -15.0;
  Sn = 5.6;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__rapidly_activating_K_current(i_K, V_K, time_, V, n)

  // Sub-modules, and any changes to those submodules:
  rapidly_activating_K_current_n_gate: goforth_bertram_khan_zhang_sherman_satin_2002_version02__rapidly_activating_K_current_n_gate(n, V, time_);

  // Assignment Rules:
  i_K := g_K * n * ( V - V_K );

  // Variable initializations:
  V_K = -70.0;
  g_K = 2500.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__Ca_activated_K_current_w_gate(w, c_SS, time_)

  // Assignment Rules:
  w := power( c_SS , q ) / (power( c_SS , q ) + power( Kd , q ));

  // Variable initializations:
  Kd = 0.7;
  q = 8.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__Ca_activated_K_current(i_KCa, V_K, time_, c_SS, V, w)

  // Sub-modules, and any changes to those submodules:
  Ca_activated_K_current_w_gate: goforth_bertram_khan_zhang_sherman_satin_2002_version02__Ca_activated_K_current_w_gate(w, c_SS, time_);

  // Assignment Rules:
  i_KCa := g_KCa * w * ( V - V_K );

  // Variable initializations:
  g_KCa = 1200.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__ATP_dependent_K_current(i_KATP, V_K, time_, V)

  // Assignment Rules:
  i_KATP := g_KATP * ( V - V_K );

  // Variable initializations:
  g_KATP = 63.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__leak_current(i_Leak, time_, V)

  // Assignment Rules:
  i_Leak := g_Leak * ( V - V_Leak );

  // Variable initializations:
  g_Leak = 14.0;
  V_Leak = -30.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_concentrations(c, c_ER, c_SS, time_, i_Ca, J_PMCA, J_SERCA, J_RELEASE, J_X)

  // Assignment Rules:
  alpha := 1.0 / ( 2.0 * F * V_CYT );
  V_CYT := 25.0 * V_ER;
  V_SS := 0.4 * V_CYT;

  // Rate Rules:
  c' = f_CYT * (-(( alpha * i_Ca + J_PMCA + J_SERCA )) + J_X );
  c_ER' = f_ER * ( V_CYT / V_ER * J_SERCA - J_RELEASE );
  c_SS' = f_SS * ( V_ER / V_SS * J_RELEASE - V_CYT / V_SS * J_X );

  // Variable initializations:
  c = 0.027;
  c_ER = 111.17;
  c_SS = 0.29;
  f_CYT = 0.01;
  f_ER = 0.005;
  f_SS = 0.04;
  F = 96845.0;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_fluxes(J_PMCA, J_SERCA, J_RELEASE, J_X, c, c_ER, c_SS, time_)

  // Assignment Rules:
  J_PMCA := k_PMCA * c;
  J_SERCA := k_SERCA * c;
  J_RELEASE := p_ER * ( c_ER - c_SS );
  J_X := p_X * ( c_SS - c );

  // Variable initializations:
  k_PMCA = 0.18;
  k_SERCA = 0.1;
  p_ER = 0.0015;
  p_X = 0.025;
end

model goforth_bertram_khan_zhang_sherman_satin_2002_version02____main()

  // Sub-modules, and any changes to those submodules:
  environment: goforth_bertram_khan_zhang_sherman_satin_2002_version02__environment(time_);
  membrane: goforth_bertram_khan_zhang_sherman_satin_2002_version02__membrane(V, time_, i_Ca, i_K, i_KATP, i_KCa, i_Leak);
  calcium_current: goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_current(i_Ca, time_, V, m_infinity);
  rapidly_activating_K_current: goforth_bertram_khan_zhang_sherman_satin_2002_version02__rapidly_activating_K_current(i_K, V_K, time_, V, n);
  Ca_activated_K_current: goforth_bertram_khan_zhang_sherman_satin_2002_version02__Ca_activated_K_current(i_KCa, V_K, time_, c_SS, V, w);
  ATP_dependent_K_current: goforth_bertram_khan_zhang_sherman_satin_2002_version02__ATP_dependent_K_current(i_KATP, V_K, time_, V);
  leak_current: goforth_bertram_khan_zhang_sherman_satin_2002_version02__leak_current(i_Leak, time_, V);
  calcium_concentrations: goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_concentrations(c, c_ER, c_SS, time_, i_Ca, J_PMCA, J_SERCA, J_RELEASE, J_X);
  calcium_fluxes: goforth_bertram_khan_zhang_sherman_satin_2002_version02__calcium_fluxes(J_PMCA, J_SERCA, J_RELEASE, J_X, c, c_ER, c_SS, time_);
end
