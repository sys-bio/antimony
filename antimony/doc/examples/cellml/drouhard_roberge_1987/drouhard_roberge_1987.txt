//Created by libAntimony v1.3
model drouhard_roberge_1987_version02__environment(time_)
end

model drouhard_roberge_1987_version02__membrane(V, time_, i_Na, i_s, i_x1, i_K1, IStimC)

  // Assignment Rules:
  IStimC := Istim;

  // Rate Rules:
  V' = (Istim - ( i_Na + i_s + i_x1 + i_K1 )) / C;

  // Variable initializations:
  C = 0.013;
end

model drouhard_roberge_1987_version02__fast_sodium_current_m_gate(m, V, time_)

  // Assignment Rules:
  alpha_m := 0.9 * ( V + 42.65 ) / ( 1.0 - exp( -0.22 * ( V + 42.65 )));
  beta_m := 1.437 * exp( -0.085 * ( V + 39.75 ));

  // Rate Rules:
  m' = alpha_m * ( 1.0 - m ) - beta_m * m;

  // Variable initializations:
  m = 0.0;
end

model drouhard_roberge_1987_version02__fast_sodium_current_h_gate(h, V, time_)

  // Assignment Rules:
  alpha_h := 0.1 * exp( -0.193 * ( V + 79.65 ));
  beta_h := 1.7 / ( 1.0 + exp( -0.095 * ( V + 20.5 )));

  // Rate Rules:
  h' = alpha_h * ( 1.0 - h ) - beta_h * h;

  // Variable initializations:
  h = 0.99;
end

model drouhard_roberge_1987_version02__fast_sodium_current(i_Na, m, h, time_, V)

  // Sub-modules, and any changes to those submodules:
  fast_sodium_current_m_gate: drouhard_roberge_1987_version02__fast_sodium_current_m_gate(m, V, time_);
  fast_sodium_current_h_gate: drouhard_roberge_1987_version02__fast_sodium_current_h_gate(h, V, time_);

  // Assignment Rules:
  i_Na := g_Na * power( m , 3.0 ) * h * ( V - E_Na );

  // Variable initializations:
  g_Na = 0.15;
  E_Na = 40.0;
end

model drouhard_roberge_1987_version02__slow_inward_current_d_gate(d, V, time_)

  // Assignment Rules:
  alpha_d := 0.095 * exp(-((( V - 5.0 ) / 100.0 ))) / ( 1.0 + exp(-((( V - 5.0 ) / 13.89 ))));
  beta_d := 0.07 * exp(-((( V + 44.0 ) / 59.0 ))) / ( 1.0 + exp(( V + 44.0 ) / 20.0 ));

  // Rate Rules:
  d' = alpha_d * ( 1.0 - d ) - beta_d * d;

  // Variable initializations:
  d = 0.003;
end

model drouhard_roberge_1987_version02__slow_inward_current_f_gate(f, V, time_)

  // Assignment Rules:
  alpha_f := 0.012 * exp(-((( V + 28.0 ) / 125.0 ))) / ( 1.0 + exp(( V + 28.0 ) / 6.67 ));
  beta_f := 0.0065 * exp(-((( V + 30.0 ) / 50.0 ))) / ( 1.0 + exp(-((( V + 30.0 ) / 5.0 ))));

  // Rate Rules:
  f' = alpha_f * ( 1.0 - f ) - beta_f * f;

  // Variable initializations:
  f = 0.994;
end

model drouhard_roberge_1987_version02__slow_inward_current(i_s, time_, V, d, f)

  // Sub-modules, and any changes to those submodules:
  slow_inward_current_d_gate: drouhard_roberge_1987_version02__slow_inward_current_d_gate(d, V, time_);
  slow_inward_current_f_gate: drouhard_roberge_1987_version02__slow_inward_current_f_gate(f, V, time_);

  // Assignment Rules:
  i_s := g_s * d * f * ( V - E_s );
  E_s := -82.3 - 13.0287 * ln( 0.001 * Cai );

  // Rate Rules:
  Cai' = -0.01 * i_s + 0.07 * ( -0.0001 - Cai );

  // Variable initializations:
  g_s = 9.0e-4;
  Cai = 0.000000177;
end

model drouhard_roberge_1987_version02__time_dependent_outward_current_x1_gate(x1, V, time_)

  // Assignment Rules:
  alpha_x1 := 5E-4 * (exp(( V + 50.0 ) / 12.1 ) / ( 1.0 + exp(( V + 50.0 ) / 17.5 )));
  beta_x1 := 0.0013 * (exp(-((( V + 20.0 ) / 16.67 ))) / ( 1.0 + exp(-((( V + 20.0 ) / 25.0 )))));

  // Rate Rules:
  x1' = alpha_x1 * ( 1.0 - x1 ) - beta_x1 * x1;
end

model drouhard_roberge_1987_version02__time_dependent_outward_current(i_x1, time_, V, x1)

  // Sub-modules, and any changes to those submodules:
  time_dependent_outward_current_x1_gate: drouhard_roberge_1987_version02__time_dependent_outward_current_x1_gate(x1, V, time_);

  // Assignment Rules:
  i_x1 := x1 * 8.0E-3 * ((exp( 0.04 * ( V + 77.0 )) - 1.0 ) / exp( 0.04 * ( V + 35.0 )));
end

model drouhard_roberge_1987_version02__time_independent_outward_current(i_K1, time_, V)

  // Assignment Rules:
  i_K1 := 0.35E-2 * ( 4.0 * ((exp( 0.04 * ( V + 85.0 )) - 1.0 ) / (exp( 0.08 * ( V + 53 )) + exp( 0.04 * ( V + 53.0 )))) + 0.2 * (( V + 23.0 ) / ( 1.0 - exp( -0.04 * ( V + 23.0 )))));
end

model drouhard_roberge_1987_version02____main()

  // Sub-modules, and any changes to those submodules:
  environment: drouhard_roberge_1987_version02__environment(time_);
  membrane: drouhard_roberge_1987_version02__membrane(V, time_, i_Na, i_s, i_x1, i_K1, IStimC);
  fast_sodium_current: drouhard_roberge_1987_version02__fast_sodium_current(i_Na, m, h, time_, V);
  slow_inward_current: drouhard_roberge_1987_version02__slow_inward_current(i_s, time_, V, d, f);
  time_dependent_outward_current: drouhard_roberge_1987_version02__time_dependent_outward_current(i_x1, time_, V, x1);
  time_independent_outward_current: drouhard_roberge_1987_version02__time_independent_outward_current(i_K1, time_, V);
end
