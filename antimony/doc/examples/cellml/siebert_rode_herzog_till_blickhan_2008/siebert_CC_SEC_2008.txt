//Created by libAntimony v1.3

//Warnings from automatic translation:
//    Unable to use the formula "(v_max - v_cc) / (v_max + v_cc * curv)" to set the assignment rule for f_v:  Loop detected:  f_v's definition ((v_max - v_cc) / (v_max + v_cc * curv)) either includes itself directly (i.e. 's5 := 6 + s5') or by proxy (i.e. 's5 := 8*d3' and 'd3 := 9*s5').

model siebert_2008__environment(time_)
end

model siebert_2008__contraction(time_)

  // Assignment Rules:
  v_cc := 1 / f_v * ((f_sec - f_pec) / (A * f_L * F_im));
  f_L := piecewise( f_c / (L_2 - L_1) * (delta_L_pec - L_1) , ( delta_L_pec >= L_1) && (delta_L_pec <= L_2 ), (1 - f_c) / -(L_2) * (delta_L_pec - L_2) , ( delta_L_pec > L_2) && (delta_L_pec <= 0 ), 1 , ( delta_L_pec > 0) && (delta_L_pec <= L_3 ), -(1 ) / (L_4 - L_3) * (delta_L_pec - L_3) , ( delta_L_pec > L_3) && (delta_L_pec <= L_4 ) );
  f_sec := piecewise( F_1 / (exp(k_sh) - 1 ) * (exp(k_sh * delta_L_sec / delta_L_sec1) - 1 ) , ( delta_L_sec > 0) && (delta_L_sec < delta_L_sec1 ), F_1 + k * (delta_L_sec - delta_L_sec1) , delta_L_sec <= delta_L_sec1 );
  f_pec := piecewise( k_1 * (exp(k_2 * delta_L_pec) - 1 ) , delta_L_pec > 0 , 0 , delta_L_pec <= 0 );
  delta_L_sec := L_mtc - delta_L_pec - L_mslack;
  L_mtc := piecewise( 0.29 , time_ <= 1 , 0.22 , ( time_ > 1) && (time_ < 5 ), 0.19 );

  // Rate Rules:
  delta_L_pec' = v_cc;

  // Variable initializations:
  L_1 = -23;
  L_2 = -14;
  L_3 = 2;
  L_4 = 19;
  f_c = 0.49;
  v_max = -141;
  curv = 5.8;
  k_1 = 0.012;
  k_2 = 0.317;
  F_1 = 4.1;
  d_LSEC1 = 4.1;
  k_sh = 3.3;
  L_m = 0.3;
  F_im = 18.1;
  tau = 0.006;
  delta_L_sec1 = 4.1;
  delta_L_pec = 0.2;
  k = 3.5;
  A = 1;
  L_mslack = 0.3;
end

model siebert_2008____main()

  // Sub-modules, and any changes to those submodules:
  environment: siebert_2008__environment(time_);
  contraction: siebert_2008__contraction(time_);
end
