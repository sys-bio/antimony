//Created by libAntimony v1.4
model schneider_shimayoshi_amano_matsuda_2006__environment(time_)
end

model schneider_shimayoshi_amano_matsuda_2006__parameters(A_iso, k_off, k_on, k_onI, k_offi, k_OFF, k_xboff, k_tmoff, k_tmonc, k_tmRU, k_tmxb, k_12, k_minus12, k_Titin, k_3c, k_3f, k_3xb, k_minus3, k_4, k_minus4, k_5)

  // Variable initializations:
  A_iso = 9000;
  k_off = 0.2;
  k_on = 17.3;
  k_onI = 0.2;
  k_offi = 0.075;
  k_OFF = -0.32;
  k_xboff = -1.37;
  k_tmoff = 0.067;
  k_tmonc = 0.014;
  k_tmRU = 10;
  k_tmxb = -1.86;
  k_12 = 2;
  k_minus12 = 0.6;
  k_Titin = 0.2;
  k_3c = 0.025;
  k_3f = 50;
  k_3xb = -1.23;
  k_minus3 = 0.008;
  k_4 = 0.077;
  k_minus4 = 0.001;
  k_5 = 0.03723;
end

model schneider_shimayoshi_amano_matsuda_2006__active_force(A_iso, RUA_MADPPi, RUA_MADP)

  // Assignment Rules:
  F_b := A_iso * (RUA_MADPPi + RUA_MADP);
end

model schneider_shimayoshi_amano_matsuda_2006__Ca_binding_rate(Q_CaB, RUNA, Ca, RUTCa_off, k_on, k_off)

  // Assignment Rules:
  Q_CaB := k_on * RUNA * Ca - k_off * RUTCa_off;
end

model schneider_shimayoshi_amano_matsuda_2006__TnI_conf_change_rate(Q_TCaA, k_onI, k_offi, k_OFF, k_xboff, RUTCa_off, RUTCa_on, RUA, RU_total, RUA_MADPPi, RUA_MADP)

  // Assignment Rules:
  Q_TCaA := k_onI * RUTCa_off - k_offI * RUTCa_on;
  k_offI := k_offi * power(1 + k_OFF * (RUA / RU_total), 2 ) * power(1 + k_xboff * ((RUA_MADPPi + RUA_MADP) / RU_total), 4.4 );
end

model schneider_shimayoshi_amano_matsuda_2006__Tm_conf_change_rate(Q_TMA, k_tmoff, k_tmRU, k_tmonc, k_tmxb, RUTM_on, RUTCa_on, RU_total, RUA_MADPPi, RUA_MADP)

  // Assignment Rules:
  Q_TMA := k_tmon * RUTCa_on - k_tmoff * RUTM_on;
  k_tmon := k_tmonc * (RUTCa_on / RU_total) * power(1 + k_tmRU * (RUTM_on / RU_total), 2 ) * power(1 + k_tmxb * ((RUA_MADPPi + RUA_MADP) / RU_total), 2 );
end

model schneider_shimayoshi_amano_matsuda_2006__KTitin(KTitin, k_Titin, L, L_0)

  // Assignment Rules:
  KTitin := piecewise( f_titinNormal , L <= 1.1 , f_titinDamaged );
  f_titinNormal := k_Titin * (9.9663 / (1 + exp((L / L_0 + 1.0639 ) / 0.0696 )));
  f_titinDamaged := k_Titin * (-(31 ) * (L / L_0) + 40 );
end

model schneider_shimayoshi_amano_matsuda_2006__myosin_binding_rate(Q_MB, KTitin, k_Titin, L, L_0, k_12, k_minus12, MADPPi, RUTM_on_eff, RUAMADPPi)

  // Sub-modules, and any changes to those submodules:
  KTitin_mod: schneider_shimayoshi_amano_matsuda_2006__KTitin(KTitin, k_Titin, L, L_0);

  // Assignment Rules:
  Q_MB := k_12 * KTitin * MADPPi * RUTM_on_eff - k_minus12 * RUAMADPPi;
end

model schneider_shimayoshi_amano_matsuda_2006__Force_Generating_rate(Q_Fgen, k_3c, k_3f, k_3xb, k_minus3, RUAMADPPi, RUA_MADPPi, RUTCa_on_eff, RUTM_on_eff, RUA_MADP, RU_total)

  // Assignment Rules:
  Q_Fgen := k_3 * RUAMADPPi - k_minus3 * RUA_MADPPi;
  k_3 := k_3c * power(1 + k_3f * (RUTCa_on_eff + RUTM_on_eff + RUAMADPPi) / RU_total, 2 ) * power(1 + k_3xb * (RUA_MADPPi + RUA_MADP) / RU_total, 2 );
end

model schneider_shimayoshi_amano_matsuda_2006__Pi_release_rate(Q_PiR, k_4, k_minus4, RUA_MADPPi, RUA_MADP)

  // Assignment Rules:
  Q_PiR := k_4 * RUA_MADPPi - k_minus4 * RUA_MADP;
end

model schneider_shimayoshi_amano_matsuda_2006__ADP_release_rate(Q_ADPR, k_5, RUA_MADP)

  // Assignment Rules:
  Q_ADPR := k_5 * RUA_MADP;
end

model schneider_shimayoshi_amano_matsuda_2006__alpha(alpha, L, L_0)

  // Assignment Rules:
  alpha := piecewise( 1.5 * (L / L_0) - 0.5 , L < 1 , 1 , ( 1 <= L) && (L < 1.1 ), -(1.6 ) * (L / L_0) + 2.76 );
end

model schneider_shimayoshi_amano_matsuda_2006__RU_species(RUTCa_off, RUTCa_on, RUTM_on, RUAMADPPi, RUA_MADPPi, RUA_MADP, Ca, RUNA, RUA, RUTM_on_eff, RUTCa_on_eff, RU_total, MADPPi, alpha, L, L_0, time_, Q_CaB, Q_TCaA, Q_TMA, Q_MB, Q_ADPR, Q_Fgen, Q_PiR)

  // Sub-modules, and any changes to those submodules:
  alpha_mod: schneider_shimayoshi_amano_matsuda_2006__alpha(alpha, L, L_0);

  // Assignment Rules:
  RUNA := RU_total - (RUTCa_off + RUTCa_on + RUTM_on + RUAMADPPi + RUA_MADPPi + RUA_MADP);
  RUA := RUTCa_on + RUTM_on + RUAMADPPi + RUA_MADPPi + RUA_MADP;
  RUTM_on_eff := alpha * RUTM_on;
  RUTCa_on_eff := alpha * RUTCa_on;

  // Rate Rules:
  RUTCa_off' = Q_CaB - Q_TCaA;
  RUTCa_on' = Q_TCaA - Q_TMA;
  RUTM_on' = Q_TMA - Q_MB + Q_ADPR;
  RUAMADPPi' = Q_MB - Q_Fgen;
  RUA_MADPPi' = Q_Fgen - Q_PiR;
  RUA_MADP' = Q_PiR - Q_ADPR;
  Ca' = -(Q_CaB);

  // Variable initializations:
  RUTCa_off = 0;
  RUTCa_on = 0;
  RUTM_on = 0;
  RUAMADPPi = 0;
  RUA_MADPPi = 0;
  RUA_MADP = 0;
  Ca = 0.01;
  RU_total = 0.0726;
  MADPPi = 0.1375;
end

model schneider_shimayoshi_amano_matsuda_2006__length(L, L_0)

  // Assignment Rules:
  L := L_0;

  // Variable initializations:
  L_0 = 0.001;
end

model schneider_shimayoshi_amano_matsuda_2006____main()

  // Sub-modules, and any changes to those submodules:
  environment: schneider_shimayoshi_amano_matsuda_2006__environment(time_);
  parameters: schneider_shimayoshi_amano_matsuda_2006__parameters(A_iso, k_off, k_on, k_onI, k_offi, k_OFF, k_xboff, k_tmoff, k_tmonc, k_tmRU, k_tmxb, k_12, k_minus12, k_Titin, k_3c, k_3f, k_3xb, k_minus3, k_4, k_minus4, k_5);
  active_force: schneider_shimayoshi_amano_matsuda_2006__active_force(A_iso, RUA_MADPPi, RUA_MADP);
  Ca_binding_rate: schneider_shimayoshi_amano_matsuda_2006__Ca_binding_rate(Q_CaB, RUNA, Ca, RUTCa_off, k_on, k_off);
  TnI_conf_change_rate: schneider_shimayoshi_amano_matsuda_2006__TnI_conf_change_rate(Q_TCaA, k_onI, k_offi, k_OFF, k_xboff, RUTCa_off, RUTCa_on, RUA, RU_total, RUA_MADPPi, RUA_MADP);
  Tm_conf_change_rate: schneider_shimayoshi_amano_matsuda_2006__Tm_conf_change_rate(Q_TMA, k_tmoff, k_tmRU, k_tmonc, k_tmxb, RUTM_on, RUTCa_on, RU_total, RUA_MADPPi, RUA_MADP);
  myosin_binding_rate: schneider_shimayoshi_amano_matsuda_2006__myosin_binding_rate(Q_MB, KTitin, k_Titin, L, L_0, k_12, k_minus12, MADPPi, RUTM_on_eff, RUAMADPPi);
  Force_Generating_rate: schneider_shimayoshi_amano_matsuda_2006__Force_Generating_rate(Q_Fgen, k_3c, k_3f, k_3xb, k_minus3, RUAMADPPi, RUA_MADPPi, RUTCa_on_eff, RUTM_on_eff, RUA_MADP, RU_total);
  Pi_release_rate: schneider_shimayoshi_amano_matsuda_2006__Pi_release_rate(Q_PiR, k_4, k_minus4, RUA_MADPPi, RUA_MADP);
  ADP_release_rate: schneider_shimayoshi_amano_matsuda_2006__ADP_release_rate(Q_ADPR, k_5, RUA_MADP);
  RU_species: schneider_shimayoshi_amano_matsuda_2006__RU_species(RUTCa_off, RUTCa_on, RUTM_on, RUAMADPPi, RUA_MADPPi, RUA_MADP, Ca, RUNA, RUA, RUTM_on_eff, RUTCa_on_eff, RU_total, MADPPi, alpha, L, L_0, time_, Q_CaB, Q_TCaA, Q_TMA, Q_MB, Q_ADPR, Q_Fgen, Q_PiR);
  length: schneider_shimayoshi_amano_matsuda_2006__length(L, L_0);
end
