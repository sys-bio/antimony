//Created by libAntimony v1.4
model bertram_sherman_2004_version01__environment(time_)
end

model bertram_sherman_2004_version01__membrane(V, time_, i_Ca, i_K, i_K_Ca, i_K_ATP)

  // Rate Rules:
  V' = -(( i_Ca + i_K + i_K_Ca + i_K_ATP )) / Cm;

  // Variable initializations:
  Cm = 5300.0;
end

model bertram_sherman_2004_version01__calcium_current_m_gate(m_infinity, V, time_)

  // Assignment Rules:
  m_infinity := power( 1.0 + exp(( vm - V ) / sm ), -1.0 );

  // Variable initializations:
  vm = -20.0;
  sm = 12.0;
end

model bertram_sherman_2004_version01__calcium_current(i_Ca, V, time_, m_infinity)

  // Sub-modules, and any changes to those submodules:
  calcium_current_m_gate: bertram_sherman_2004_version01__calcium_current_m_gate(m_infinity, V, time_);

  // Assignment Rules:
  i_Ca := g_Ca * m_infinity * ( V - V_Ca );

  // Variable initializations:
  g_Ca = 1200.0;
  V_Ca = 25.0;
end

model bertram_sherman_2004_version01__delayed_rectifier_potassium_current_n_gate(n, V, time_)

  // Assignment Rules:
  n_infinity := power( 1.0 + exp(( vn - V ) / sn ), -1.0 );

  // Rate Rules:
  n' = ( n_infinity - n ) / tau_n;

  // Variable initializations:
  tau_n = 16.0;
  vn = -16.0;
  sn = 5.0;
end

model bertram_sherman_2004_version01__delayed_rectifier_potassium_current(i_K, V_K, V, time_, n)

  // Sub-modules, and any changes to those submodules:
  delayed_rectifier_potassium_current_n_gate: bertram_sherman_2004_version01__delayed_rectifier_potassium_current_n_gate(n, V, time_);

  // Assignment Rules:
  i_K := g_K * n * ( V - V_K );

  // Variable initializations:
  V_K = -75.0;
  g_K = 3000.0;
end

model bertram_sherman_2004_version01__calcium_dependent_potassium_current_omega_gate(omega, c)

  // Assignment Rules:
  omega := power( c , 5.0 ) / (power( c , 5.0 ) + power( kD , 5.0 ));

  // Variable initializations:
  kD = 0.3;
end

model bertram_sherman_2004_version01__calcium_dependent_potassium_current(i_K_Ca, V_K, V, c, time_, omega)

  // Sub-modules, and any changes to those submodules:
  calcium_dependent_potassium_current_omega_gate: bertram_sherman_2004_version01__calcium_dependent_potassium_current_omega_gate(omega, c);

  // Assignment Rules:
  i_K_Ca := g_K_Ca * omega * ( V - V_K );

  // Variable initializations:
  g_K_Ca = 300.0;
end

model bertram_sherman_2004_version01__nucleotide_sensitive_potassium_current_a_gate(a, c, time_)

  // Assignment Rules:
  a_infinity := power( 1.0 + exp(( r - c ) / sa ), -1.0 );

  // Rate Rules:
  a' = ( a_infinity - a ) / tau_a;

  // Variable initializations:
  tau_a = 300000.0;
  sa = 0.1;
  r = 0.14;
end

model bertram_sherman_2004_version01__nucleotide_sensitive_potassium_current(i_K_ATP, V_K, V, c, time_, a)

  // Sub-modules, and any changes to those submodules:
  nucleotide_sensitive_potassium_current_a_gate: bertram_sherman_2004_version01__nucleotide_sensitive_potassium_current_a_gate(a, c, time_);

  // Assignment Rules:
  i_K_ATP := g_K_ATP * a * ( V - V_K );

  // Variable initializations:
  g_K_ATP = 500.0;
end

model bertram_sherman_2004_version01__cytosolic_free_calcium_concentration(c, Jmem, Jer, time_)

  // Rate Rules:
  c' = fcyt * ( Jmem + Jer );

  // Variable initializations:
  fcyt = 0.01;
end

model bertram_sherman_2004_version01__ER_calcium_concentration(c_er, Jer, time_)

  // Rate Rules:
  c_er' = -( fer ) * Vcyt_Ver * Jer;

  // Variable initializations:
  fer = 0.01;
  Vcyt_Ver = 5.0;
end

model bertram_sherman_2004_version01__calcium_flux_through_the_membrane(Jmem, c, i_Ca)

  // Assignment Rules:
  Jmem := -(( alpha * i_Ca + kPMCA * c ));

  // Variable initializations:
  alpha = 4.5E-6;
  kPMCA = 0.2;
end

model bertram_sherman_2004_version01__calcium_influx_into_the_ER(J_SERCA, c)

  // Assignment Rules:
  J_SERCA := kSERCA * c;

  // Variable initializations:
  kSERCA = 0.4;
end

model bertram_sherman_2004_version01__calcium_leak_out_of_the_ER(Jleak, c, c_er)

  // Assignment Rules:
  Jleak := pleak * ( c_er - c );

  // Variable initializations:
  pleak = 0.0005;
end

model bertram_sherman_2004_version01__calcium_efflux_through_the_IP3R(JIP3, c, c_er)

  // Assignment Rules:
  JIP3 := O_infinity * ( c_er - c );
  O_infinity := power(c / (d_act + c), 3 ) * power(IP3 / (d_IP3 + IP3), 3 ) * power(c / (d_inact + c), 3 ) * 1;

  // Variable initializations:
  d_act = 0.35;
  d_IP3 = 0.5;
  d_inact = 0.4;
end

model bertram_sherman_2004_version01__net_calcium_efflux_out_of_the_ER(Jer, Jleak, JIP3, J_SERCA)

  // Assignment Rules:
  Jer := Jleak + JIP3 - J_SERCA;
end

model bertram_sherman_2004_version01____main()

  // Sub-modules, and any changes to those submodules:
  environment: bertram_sherman_2004_version01__environment(time_);
  membrane: bertram_sherman_2004_version01__membrane(V, time_, i_Ca, i_K, i_K_Ca, i_K_ATP);
  calcium_current: bertram_sherman_2004_version01__calcium_current(i_Ca, V, time_, m_infinity);
  delayed_rectifier_potassium_current: bertram_sherman_2004_version01__delayed_rectifier_potassium_current(i_K, V_K, V, time_, n);
  calcium_dependent_potassium_current: bertram_sherman_2004_version01__calcium_dependent_potassium_current(i_K_Ca, V_K, V, c, time_, omega);
  nucleotide_sensitive_potassium_current: bertram_sherman_2004_version01__nucleotide_sensitive_potassium_current(i_K_ATP, V_K, V, c, time_, a);
  cytosolic_free_calcium_concentration: bertram_sherman_2004_version01__cytosolic_free_calcium_concentration(c, Jmem, Jer, time_);
  ER_calcium_concentration: bertram_sherman_2004_version01__ER_calcium_concentration(c_er, Jer, time_);
  calcium_flux_through_the_membrane: bertram_sherman_2004_version01__calcium_flux_through_the_membrane(Jmem, c, i_Ca);
  calcium_influx_into_the_ER: bertram_sherman_2004_version01__calcium_influx_into_the_ER(J_SERCA, c);
  calcium_leak_out_of_the_ER: bertram_sherman_2004_version01__calcium_leak_out_of_the_ER(Jleak, c, c_er);
  calcium_efflux_through_the_IP3R: bertram_sherman_2004_version01__calcium_efflux_through_the_IP3R(JIP3, c, c_er);
  net_calcium_efflux_out_of_the_ER: bertram_sherman_2004_version01__net_calcium_efflux_out_of_the_ER(Jer, Jleak, JIP3, J_SERCA);
end
