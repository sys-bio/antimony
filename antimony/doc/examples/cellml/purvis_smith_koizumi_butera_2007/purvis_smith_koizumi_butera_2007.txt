//Created by libAntimony v1.3
model butera_koizumi_purvis_smith_2006__environment(time_)
end

model butera_koizumi_purvis_smith_2006__membrane(V, time_, i_tonic_e, i_Na, i_NaP, i_K, i_leak)

  // Rate Rules:
  V' = (-((i_Na + i_NaP + i_K + i_leak)) + i_tonic_e + i_app) / C;

  // Variable initializations:
  V = 1;
  C = 0.021;
  i_app = 0;
end

model butera_koizumi_purvis_smith_2006__fast_sodium_current_m_gate(m_infinity, V)

  // Assignment Rules:
  m_infinity := 1 / (1 + exp((V - theta_m) / omega_m));

  // Variable initializations:
  theta_m = -34;
  omega_m = -5;
end

model butera_koizumi_purvis_smith_2006__fast_sodium_current(i_Na, E_Na, time_, V, m_infinity, n)

  // Sub-modules, and any changes to those submodules:
  fast_sodium_current_m_gate: butera_koizumi_purvis_smith_2006__fast_sodium_current_m_gate(m_infinity, V);

  // Assignment Rules:
  i_Na := g_Na * power(m_infinity, 3 ) * (1 - n) * (1 / 1000 ) * (V - E_Na);

  // Variable initializations:
  E_Na = 50;
  g_Na = 28;
end

model butera_koizumi_purvis_smith_2006__potassium_current_n_gate(n, V, time_)

  // Assignment Rules:
  n_infinity := 1 / (1 + exp((V - theta_n) / omega_n));
  tau_n := tau_n_max / cosh((V - theta_n) / (2 * omega_n));

  // Rate Rules:
  n' = (n_infinity - n) / tau_n;

  // Variable initializations:
  n = 0.003;
  tau_n_max = 10;
  theta_n = -29;
  omega_n = -4;
end

model butera_koizumi_purvis_smith_2006__potassium_current(i_K, time_, V, n)

  // Sub-modules, and any changes to those submodules:
  potassium_current_n_gate: butera_koizumi_purvis_smith_2006__potassium_current_n_gate(n, V, time_);

  // Assignment Rules:
  i_K := g_K * power(n, 4 ) * (1 / 1000 ) * (V - E_K);

  // Variable initializations:
  g_K = 11.2;
  E_K = -85;
end

model butera_koizumi_purvis_smith_2006__persistent_sodium_current_m_gate(m_infinity, V)

  // Assignment Rules:
  m_infinity := 1 / (1 + exp((V - theta_m) / omega_m));

  // Variable initializations:
  theta_m = -45.1;
  omega_m = -6;
end

model butera_koizumi_purvis_smith_2006__persistent_sodium_current_h_gate(h, V, time_)

  // Assignment Rules:
  h_infinity := 1 / (1 + exp((V - theta_h) / omega_h));
  tau_h := tau_h_max / cosh((V - theta_h) / (2 * omega_h));

  // Rate Rules:
  h' = (h_infinity - h) / tau_h;

  // Variable initializations:
  h = 0.92;
  tau_h_max = 10000;
  theta_h = -53;
  omega_h = 6;
end

model butera_koizumi_purvis_smith_2006__persistent_sodium_current(i_NaP, time_, V, E_Na, m_infinity, h)

  // Sub-modules, and any changes to those submodules:
  persistent_sodium_current_m_gate: butera_koizumi_purvis_smith_2006__persistent_sodium_current_m_gate(m_infinity, V);
  persistent_sodium_current_h_gate: butera_koizumi_purvis_smith_2006__persistent_sodium_current_h_gate(h, V, time_);

  // Assignment Rules:
  i_NaP := g_NaP * m_infinity * h * (1 / 1000 ) * (V - E_Na);

  // Variable initializations:
  g_NaP = 2.44;
end

model butera_koizumi_purvis_smith_2006__leakage_current(i_leak, time_, V)

  // Assignment Rules:
  i_leak := g_leak * (1 / 1000 ) * (V - E_leak);

  // Variable initializations:
  g_leak = 2.2;
  E_leak = -70;
end

model butera_koizumi_purvis_smith_2006__tonic_current(i_tonic_e, time_, V)

  // Assignment Rules:
  i_tonic_e := g_tonic_e * (1 / 1000 ) * (V - E_syn_e);

  // Variable initializations:
  g_tonic_e = 0;
  E_syn_e = 0;
end

model butera_koizumi_purvis_smith_2006____main()

  // Sub-modules, and any changes to those submodules:
  environment: butera_koizumi_purvis_smith_2006__environment(time_);
  membrane: butera_koizumi_purvis_smith_2006__membrane(V, time_, i_tonic_e, i_Na, i_NaP, i_K, i_leak);
  fast_sodium_current: butera_koizumi_purvis_smith_2006__fast_sodium_current(i_Na, E_Na, time_, V, m_infinity, n);
  potassium_current: butera_koizumi_purvis_smith_2006__potassium_current(i_K, time_, V, n);
  persistent_sodium_current: butera_koizumi_purvis_smith_2006__persistent_sodium_current(i_NaP, time_, V, E_Na, m_infinity0, h);
  leakage_current: butera_koizumi_purvis_smith_2006__leakage_current(i_leak, time_, V);
  tonic_current: butera_koizumi_purvis_smith_2006__tonic_current(i_tonic_e, time_, V);
end
