//Created by libAntimony v1.4
model skouibine_trayanova_moore_1999_version02__environment(time_)
end

model skouibine_trayanova_moore_1999_version02__membrane(V, time_, i_Na, i_s, i_x1, i_K1)

  // Rate Rules:
  V' = ( I_stim - ( i_Na + i_s + i_x1 + i_K1 )) / C;

  // Variable initializations:
  V = -86.9;
  C = 1.0e-2;
end

model skouibine_trayanova_moore_1999_version02__fast_sodium_current_m_gate(m, V, time_)

  // Assignment Rules:
  alpha_m := piecewise( 890.9437890 * (exp( 0.0486479 * V - 4.8647916 ) / ( 1.0 + 5.93962526 * exp( 0.0486479 * V - 4.8647916 ))) , V > 100.0 , 0.9 * (( V + 42.65 ) / ( 1.0 - exp( -0.22 * V - 9.3830 ))) );
  beta_m := piecewise( 1.437 * exp( -0.085 * V - 3.37875 ) , V > -85.0 , 100.0 / ( 1.0 + 0.486479 * exp( 0.2597504 * V + 22.0787804 )) );

  // Rate Rules:
  m' = alpha_m * ( 1.0 - m ) - beta_m * m;

  // Variable initializations:
  m = 0.0;
end

model skouibine_trayanova_moore_1999_version02__fast_sodium_current_h_gate(h, V, time_)

  // Assignment Rules:
  alpha_h := piecewise( 0.1 * exp( -0.193 * V - 15.37245 ) , V > -90.0 , -12.0662845 - 0.1422598 * V );
  beta_h := 1.7 / ( 1.0 + exp( -0.095 * V - 1.9475 ));

  // Rate Rules:
  h' = alpha_h * ( 1.0 - h ) - beta_h * h;

  // Variable initializations:
  h = 0.99;
end

model skouibine_trayanova_moore_1999_version02__fast_sodium_current(i_Na, time_, V, m, h)

  // Sub-modules, and any changes to those submodules:
  fast_sodium_current_m_gate: skouibine_trayanova_moore_1999_version02__fast_sodium_current_m_gate(m, V, time_);
  fast_sodium_current_h_gate: skouibine_trayanova_moore_1999_version02__fast_sodium_current_h_gate(h, V, time_);

  // Assignment Rules:
  i_Na := g_Na * power( m , 3.0 ) * h * ( V - E_Na );

  // Variable initializations:
  g_Na = 0.15;
  E_Na = 40.0;
end

model skouibine_trayanova_moore_1999_version02__time_independent_outward_current(i_K1, time_, V)

  // Assignment Rules:
  i_K1 := 0.35e-2 * ( 4.0 * ((exp( 0.04 * ( V + 85.0 )) - 1.0 ) / (exp( 0.08 * ( V + 53 )) + exp( 0.04 * ( V + 53.0 )))) + 0.2 * (( V + 23.0 ) / ( 1.0 - exp( -0.04 * ( V + 23.0 )))));
end

model skouibine_trayanova_moore_1999_version02__time_dependent_outward_current_x1_gate(x1, V, time_)

  // Assignment Rules:
  alpha_x1 := piecewise( 151.7994692 * (exp( 0.0654679 * V - 26.1871448 ) / ( 1.0 + 1.5179947 * exp( 0.0654679 * V - 26.1871448 ))) , V > 400.0 , 0.0005 * (exp( V * 0.083 + 4.150 ) / ( 1.0 + exp( 0.057 * V + 2.850 ))) );
  beta_x1 := 0.0013 * (exp( V * -0.06 - 1.2 ) / ( 1.0 + exp( -0.04 * V - 0.8 )));

  // Rate Rules:
  x1' = alpha_x1 * ( 1.0 - x1 ) - beta_x1 * x1;

  // Variable initializations:
  x1 = 0.0;
end

model skouibine_trayanova_moore_1999_version02__time_dependent_outward_current(i_x1, time_, V, x1)

  // Sub-modules, and any changes to those submodules:
  time_dependent_outward_current_x1_gate: skouibine_trayanova_moore_1999_version02__time_dependent_outward_current_x1_gate(x1, V, time_);

  // Assignment Rules:
  i_x1 := x1 * 0.8e-2 * ((exp( 0.04 * ( V + 77.0 )) - 1.0 ) / exp( 0.04 * ( V + 35.0 )));
end

model skouibine_trayanova_moore_1999_version02__slow_inward_current_d_gate(d, V, time_)

  // Assignment Rules:
  alpha_d := 0.095 * exp(-((( V - 5.0 ) / 100.0 ))) / ( 1.0 + exp(-((( V - 5.0 ) / 13.89 ))));
  beta_d := 0.07 * exp(-((( V + 44.0 ) / 59.0 ))) / ( 1.0 + exp(( V + 44.0 ) / 20.0 ));

  // Rate Rules:
  d' = alpha_d / R_d * ( 1.0 - d ) - beta_d * d;

  // Variable initializations:
  d = 0.0;
  R_d = 1.0;
end

model skouibine_trayanova_moore_1999_version02__slow_inward_current_f_gate(f, V, time_)

  // Assignment Rules:
  alpha_f := 0.012 * exp(-((( V + 28.0 ) / 125.0 ))) / ( 1.0 + exp(( V + 28.0 ) / 6.67 ));
  beta_f := 0.0065 * exp(-((( V + 30.0 ) / 50.0 ))) / ( 1.0 + exp(-((( V + 30.0 ) / 5.0 ))));

  // Rate Rules:
  f' = alpha_f / R_f * ( 1.0 - f ) - beta_f * f;

  // Variable initializations:
  f = 1.0;
  R_f = 1.0;
end

model skouibine_trayanova_moore_1999_version02__slow_inward_current(i_s, time_, V, d, f)

  // Sub-modules, and any changes to those submodules:
  slow_inward_current_d_gate: skouibine_trayanova_moore_1999_version02__slow_inward_current_d_gate(d, V, time_);
  slow_inward_current_f_gate: skouibine_trayanova_moore_1999_version02__slow_inward_current_f_gate(f, V, time_);

  // Assignment Rules:
  i_s := g_s * d * f * ( V - E_s );
  E_s := -82.3 - 13.0287 * ln( Cai * 0.001 );

  // Rate Rules:
  Cai' = piecewise( 0.0 , V > 200.0 , i_s * -0.01 + 0.07 * ( 0.0001 - Cai ) );

  // Variable initializations:
  g_s = 9.0e-4;
  Cai = 1.0e-4;
end

model skouibine_trayanova_moore_1999_version02____main()

  // Sub-modules, and any changes to those submodules:
  environment: skouibine_trayanova_moore_1999_version02__environment(time_);
  membrane: skouibine_trayanova_moore_1999_version02__membrane(V, time_, i_Na, i_s, i_x1, i_K1);
  fast_sodium_current: skouibine_trayanova_moore_1999_version02__fast_sodium_current(i_Na, time_, V, m, h);
  time_independent_outward_current: skouibine_trayanova_moore_1999_version02__time_independent_outward_current(i_K1, time_, V);
  time_dependent_outward_current: skouibine_trayanova_moore_1999_version02__time_dependent_outward_current(i_x1, time_, V, x1);
  slow_inward_current: skouibine_trayanova_moore_1999_version02__slow_inward_current(i_s, time_, V, d, f);
end
