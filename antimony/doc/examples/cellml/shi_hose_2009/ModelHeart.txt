//Created by libAntimony v1.4
model TempCDv__TempCDv(Pi_, Po, Qi, Qo, CV, E, t, Pini, Vini, V0)

  // Assignment Rules:
  Pi_ := Pini + E * (V - Vini);
  Qo := piecewise( CV * Tao * power(abs(Pi_ - Po), 0.5 ) , Pi_ >= Po , -1 * CV * Tao * power(abs(Po - Pi_), 0.5 ) , Pi_ < Po );
  Tao := piecewise( 1 , Pi_ >= Po , 0 , Pi_ < Po );

  // Rate Rules:
  V' = Qi - Qo;

  // Variable initializations:
  V = V0;
end

model TempCDa__TempCDa(Pi_, Po, Qi, Qo, CV, E, t, Pini, Vini, Tao, V0)

  // Assignment Rules:
  Pi_ := Pini + E * (V - Vini);
  Qo := piecewise( CV * Tao * power(abs(Pi_ - Po), 0.5 ) , Pi_ >= Po , -1 * CV * Tao * power(abs(Po - Pi_), 0.5 ) , Pi_ < Po );
  Tao := piecewise( 1 , Pi_ >= Po , 0 , Pi_ < Po );

  // Rate Rules:
  V' = Qi - Qo;

  // Variable initializations:
  V = V0;
end

model EVentricle__EVentricle(Emax, Emin, T, Ts1, Ts2, E, t)

  // Assignment Rules:
  E := Emin + et * (Emax - Emin) / 2;
  mt := t - T * floor(t / T);
  et := piecewise( 1 - cos(3.14159 * mt / (Ts1 * T)) , ( mt >= 0) && (mt <= Ts1 * T ), 1 + cos(3.14159 * (mt - Ts1 * T) / ((Ts2 - Ts1) * T)) , ( mt > Ts1 * T) && (mt <= Ts2 * T ), 0 , ( mt > Ts2 * T) && (mt < T ) );
end

model EAtrium__EAtrium(Emax, Emin, T, Tpwb, Tpww, E, t)

  // Assignment Rules:
  E := Emin + et * (Emax - Emin) / 2;
  mt := t - T * floor(t / T);
  et := piecewise( 1 - cos(2 * 3.14159 * (mt - Tpwb * T + T) / (Tpww * T)) , ( mt >= 0) && (mt <= (Tpwb + Tpww) * T - T ), 0 , ( mt > (Tpwb + Tpww) * T - T) && (mt <= Tpwb * T ), 1 - cos(2 * 3.14159 * (mt - Tpwb * T) / (Tpww * T)) , ( mt > Tpwb * T) && (mt <= T ) );
end

model ParaHeart__ParaHeart(ElaMax, ElaMin, PlaIni, VlaIni, ElvMax, ElvMin, PlvIni, VlvIni, EraMax, EraMin, PraIni, VraIni, ErvMax, ErvMin, PrvIni, VrvIni, T, Tpwb, Tpww, Ts1, Ts2, CVao, CVmi, CVpa, CVti, Vlv0, Vla0, Vra0, Vrv0)

  // Variable initializations:
  ElaMax = 0.25;
  ElaMin = 0.15;
  PlaIni = 1.0;
  VlaIni = 4.0;
  ElvMax = 2.5;
  ElvMin = 0.1;
  PlvIni = 1.0;
  VlvIni = 5.0;
  EraMax = 0.25;
  EraMin = 0.15;
  PraIni = 1.0;
  VraIni = 4.0;
  ErvMax = 1.15;
  ErvMin = 0.1;
  PrvIni = 1.0;
  VrvIni = 10.0;
  T = 1.0;
  Tpwb = 0.92;
  Tpww = 0.09;
  Ts1 = 0.3;
  Ts2 = 0.45;
  CVao = 350.;
  CVmi = 400.;
  CVpa = 350.;
  CVti = 400.;
  Vlv0 = 500;
  Vla0 = 20;
  Vra0 = 20;
  Vrv0 = 500;
end

model ModelHeart__LeftHeart(Pi_, Po, Qi, Qo, t)

  // Sub-modules, and any changes to those submodules:
  LV: TempCDv__TempCDv(Pi_0, Po, Qi0, Qo, CV0, E0, t, Pini0, Vini0, V00);
  LA: TempCDa__TempCDa(Pi_, Pi_0, Qi, Qi0, CV, E, t, Pini, Vini, Tao, V0);
  Elv: EVentricle__EVentricle(Emax0, Emin0, T, Ts1, Ts2, E0, t);
  Ela: EAtrium__EAtrium(Emax, Emin, T, Tpwb, Tpww, E, t);
  ParaLHeart: ParaHeart__ParaHeart(Emax, Emin, Pini, Vini, Emax0, Emin0, Pini0, Vini0, EraMax, EraMin, PraIni, VraIni, ErvMax, ErvMin, PrvIni, VrvIni, T, Tpwb, Tpww, Ts1, Ts2, CV0, CV, CVpa, CVti, V00, V0, Vra0, Vrv0);
end

model ModelHeart__RightHeart(Pi_, Po, Qi, Qo, t)

  // Sub-modules, and any changes to those submodules:
  RV: TempCDv__TempCDv(Pi_0, Po, Qi0, Qo, CV0, E0, t, Pini0, Vini0, V00);
  RA: TempCDa__TempCDa(Pi_, Pi_0, Qi, Qi0, CV, E, t, Pini, Vini, Tao, V0);
  Erv: EVentricle__EVentricle(Emax0, Emin0, T, Ts1, Ts2, E0, t);
  Era: EAtrium__EAtrium(Emax, Emin, T, Tpwb, Tpww, E, t);
  ParaRHeart: ParaHeart__ParaHeart(ElaMax, ElaMin, PlaIni, VlaIni, ElvMax, ElvMin, PlvIni, VlvIni, Emax, Emin, Pini, Vini, Emax0, Emin0, Pini0, Vini0, T, Tpwb, Tpww, Ts1, Ts2, CVao, CVmi, CV0, CV, Vlv0, Vla0, V0, V00);
end

model ModelHeart____main()

  // Sub-modules, and any changes to those submodules:
  LeftHeart: ModelHeart__LeftHeart(Pi_, Po, Qi, Qo, t);
  RightHeart: ModelHeart__RightHeart(Pi_0, Po0, Qi0, Qo0, t0);
end
