//Created by libAntimony v1.3
model cellmlmod_environment()

  //Other declarations:
  var time;
end

model cellmlmod_cytoplasmic_calcium()

  // Assignment Rules:
  J_i := J_pm  +  J_ER

  // Rate Rules:
   Ca_i ' = -( J_i )

  //Other declarations:
  var Ca_i, J_i, J_ER, J_pm, time;
end

model cellmlmod_intraluminal_calcium()

  // Assignment Rules:
  Ca_ER_init := Ca_i  +  J_SERCA  *  Ca_i  / ( P_ER  * ( Ca_i  /  v_i ))

  // Rate Rules:
   Ca_ER ' = J_ER  * ( v_i  *  k_i  / ( v_ER  *  k_ER ))

  //Other declarations:
  var Ca_ER, v_ER, k_ER, Ca_ER_init, Ca_i, v_i, k_i, J_ER, P_ER, J_SERCA;
  var time;
end

model cellmlmod_total_cytoplasmic_Ca_flux()

  // Assignment Rules:
  J_ICa := I_Ca  / ( 2.0   *  F  *  v_i  *  k_i )

  // Variable initializations:
  F = 96.5;

  //Other declarations:
  var J_ICa, v_i, k_i, F, I_Ca, time;
end

model cellmlmod_Ca_extrusion_across_the_plasma_membrane()

  // Assignment Rules:
  J_pm := J_extru  +  J_ICa
  J_extru := power( k_i ,  -1.0  ) * ( k_leak_pm  * ( Ca_i  -  Ca_o ) +  Vmax_extru  / ( 1.0   + power( EC50_extru  /  Ca_i ,  n_extru )))

  // Variable initializations:
  k_leak_pm = 0.00000015;
  Vmax_extru = 25.0;
  EC50_extru = 386.0;
  n_extru = 2.4;
  Ca_o = 2.0;

  //Other declarations:
  var J_pm, J_extru, k_leak_pm, Vmax_extru, EC50_extru, n_extru, Ca_o, J_ICa;
  var k_i, Ca_i, time;
end

model cellmlmod_Ca_uptake_by_SR_Ca_ATPase()

  // Assignment Rules:
  J_SERCA := Vmax_SERCA  / ( k_i  * ( 1.0   + power( EC50_SERCA  /  Ca_i ,  n_SERCA )))

  // Variable initializations:
  Vmax_SERCA = 2146.0;
  EC50_SERCA = 30.3;
  n_SERCA = 2.5;

  //Other declarations:
  var J_SERCA, Vmax_SERCA, EC50_SERCA, n_SERCA, k_i, Ca_i, time;
end

model cellmlmod_ER_Ca_release()

  // Assignment Rules:
  J_ER := J_SERCA  +  J_release
  P_ER := v_i  * ( P_basal  +  Pmax_RyR  / ( 1.0   + power( EC50_RyR  /  Ca_i ,  n_RyR )))
  J_release := P_ER  * ( Ca_i  -  Ca_ER ) / ( v_i  *  k_i )

  // Variable initializations:
  P_basal = 0.009;
  Pmax_RyR = 0.05;
  EC50_RyR = 2641.0;
  n_RyR = 0.96;

  //Other declarations:
  var J_ER, P_ER, P_basal, Pmax_RyR, EC50_RyR, n_RyR, J_release, J_SERCA;
  var v_i, k_i, Ca_i, Ca_ER, time;
end

model albrecht_colegrove_friel_2002_version01()

  // Sub-modules, and any changes to those submodules:
  environment: cellmlmod_environment()
  cytoplasmic_calcium: cellmlmod_cytoplasmic_calcium()
  intraluminal_calcium: cellmlmod_intraluminal_calcium()
  total_cytoplasmic_Ca_flux: cellmlmod_total_cytoplasmic_Ca_flux()
  Ca_extrusion_across_the_plasma_membrane: cellmlmod_Ca_extrusion_across_the_plasma_membrane()
  Ca_uptake_by_SR_Ca_ATPase: cellmlmod_Ca_uptake_by_SR_Ca_ATPase()
  ER_Ca_release: cellmlmod_ER_Ca_release()
  cytoplasmic_calcium.time is environment.time;
  intraluminal_calcium.time is environment.time;
  total_cytoplasmic_Ca_flux.time is environment.time;
  Ca_extrusion_across_the_plasma_membrane.time is environment.time;
  Ca_uptake_by_SR_Ca_ATPase.time is environment.time;
  ER_Ca_release.time is environment.time;
  cytoplasmic_calcium.Ca_i is Ca_extrusion_across_the_plasma_membrane.Ca_i;
  cytoplasmic_calcium.J_pm is Ca_extrusion_across_the_plasma_membrane.J_pm;
  Ca_extrusion_across_the_plasma_membrane.Ca_i is Ca_uptake_by_SR_Ca_ATPase.Ca_i;
  Ca_uptake_by_SR_Ca_ATPase.Ca_i is ER_Ca_release.Ca_i;
  cytoplasmic_calcium.J_ER is ER_Ca_release.J_ER;
  ER_Ca_release.Ca_i is intraluminal_calcium.Ca_i;
  intraluminal_calcium.Ca_ER is ER_Ca_release.Ca_ER;
  intraluminal_calcium.J_ER is ER_Ca_release.J_ER;
  intraluminal_calcium.P_ER is ER_Ca_release.P_ER;
  intraluminal_calcium.J_SERCA is Ca_uptake_by_SR_Ca_ATPase.J_SERCA;
  Ca_uptake_by_SR_Ca_ATPase.J_SERCA is ER_Ca_release.J_SERCA;
  total_cytoplasmic_Ca_flux.J_ICa is Ca_extrusion_across_the_plasma_membrane.J_ICa;
  total_cytoplasmic_Ca_flux.k_i is Ca_extrusion_across_the_plasma_membrane.k_i;
  total_cytoplasmic_Ca_flux.v_i is intraluminal_calcium.v_i;
  Ca_extrusion_across_the_plasma_membrane.k_i is intraluminal_calcium.k_i;
  intraluminal_calcium.v_i is ER_Ca_release.v_i;
  intraluminal_calcium.k_i is ER_Ca_release.k_i;
  ER_Ca_release.k_i is Ca_uptake_by_SR_Ca_ATPase.k_i;
end
