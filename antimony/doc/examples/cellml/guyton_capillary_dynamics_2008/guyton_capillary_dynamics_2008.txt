//Created by libAntimony v1.3
model capillary_dynamics_CellML1_0_model__environment(time_)
end

model capillary_dynamics_CellML1_0_model__parameter_values(CFC, TRPL, CPR, LPDE, PCE, PCR, LPK, LPPR, CPK, TSSLML, TSSLTC, HYL, CMPTSS, PGHF, GCOPF, VTSF, PLDF)

  // Variable initializations:
  CFC = 0.01167;
  TRPL = 0;
  CPR = 40;
  LPDE = 8;
  PCE = 1;
  PCR = 15;
  LPK = 2.728e-14;
  LPPR = 0.03;
  CPK = 0.000253;
  TSSLML = 0.15;
  TSSLTC = 0.005;
  HYL = 60;
  CMPTSS = 2;
  PGHF = -2;
  GCOPF = 0.8092;
  VTSF = 6;
  PLDF = 4.2;
end

model capillary_dynamics_CellML1_0_model__capillary_membrane_dynamics()
end

model capillary_dynamics_CellML1_0_model__capillary_pressure(RVS, BFN, PVS, PC)

  // Assignment Rules:
  PC := RVS * 1.7 * BFN + PVS;
end

model capillary_dynamics_CellML1_0_model__rate_of_fluid_out_of_capillaries(PC, PGH, PTC, PPC, VTCPL, VTC, CFC)

  // Assignment Rules:
  VTC := (PC - PPC - PGH + PTC) * CFC + VTCPL;
end

model capillary_dynamics_CellML1_0_model__plasma_volume_and_protein()
end

model capillary_dynamics_CellML1_0_model__plasma_volume(DFP, VTC, VTL, time_, VP, TRPL)

  // Assignment Rules:
  VPD := VTL - VTC - DFP + TRPL;

  // Rate Rules:
  VP' = VPD;

  // Variable initializations:
  VP = 3.00449;
end

model capillary_dynamics_CellML1_0_model__plasma_protein_concentration(PRP, VP, CPP)

  // Assignment Rules:
  CPP := PRP / VP;
end

model capillary_dynamics_CellML1_0_model__protein_destruction_and_formation(CPP, DLP, CPR, LPPR, LPDE, LPK)

  // Assignment Rules:
  DLP := LPPR - power(CPPD, LPDE) * LPK;
  CPPD := piecewise( 0 , CPP - CPR < 0 , CPP - CPR );
end

model capillary_dynamics_CellML1_0_model__plasma_leakage(PC, VTCPL, PCR, CPK, PCE)

  // Assignment Rules:
  VTCPL := power(PRCD * CPK, PCE);
  PRCD := piecewise( 0 , PC - PCR < 0 , PC - PCR );
end

model capillary_dynamics_CellML1_0_model__protein_influx_into_interstitium(VTCPL, CPP, CPI, DPC)

  // Assignment Rules:
  DPC := VTCPL * CPP + (CPP - CPI) * 0.00104;
end

model capillary_dynamics_CellML1_0_model__total_plasma_protein(DPC, PPD, DPL, DLP, time_, PRP, TRPL)

  // Assignment Rules:
  DPP := DLP + DPL - DPC - PPD + TRPL * 72;

  // Rate Rules:
  PRP' = DPP;

  // Variable initializations:
  PRP = 216.243;
end

model capillary_dynamics_CellML1_0_model__plasma_colloid_osmotic_pressure(CPP, PPC)

  // Assignment Rules:
  PPC := 0.28 * CPP + 0.0019 * power(CPP, 2 );
end

model capillary_dynamics_CellML1_0_model__systemic_tissue_fluid_volume_and_protein()
end

model capillary_dynamics_CellML1_0_model__total_systemic_fluid_volume(VEC, VP, VPF, VTS)

  // Assignment Rules:
  VTS := VEC - VP - VPF;
end

model capillary_dynamics_CellML1_0_model__interstitial_fluid_volume(VTS, time_, VTS1, TSSLML, TSSLTC)

  // Assignment Rules:
  VTS1 := VTS - VTS2;

  // Rate Rules:
  VTS2' = ((VTS - 12 ) * TSSLML - VTS2) * TSSLTC;

  // Variable initializations:
  VTS2 = 0.0;
end

model capillary_dynamics_CellML1_0_model__total_interstitial_protein(DPC, DPL, time_, TSP)

  // Assignment Rules:
  DPI := DPC - DPL;

  // Rate Rules:
  TSP' = DPI;

  // Variable initializations:
  TSP = 279.945;
end

model capillary_dynamics_CellML1_0_model__interstitial_protein_concentration(TSP, VTS, CPI)

  // Assignment Rules:
  CPI := TSP / VTS;
end

model capillary_dynamics_CellML1_0_model__interstitial_colloid_osmotic_pressure(CPI, PTCPR)

  // Assignment Rules:
  PTCPR := 0.28 * CPI + 0.0019 * power(CPI, 2 );
end

model capillary_dynamics_CellML1_0_model__lymph_protein_flow(CPI, VTL, DPL)

  // Assignment Rules:
  DPL := CPI * VTL;
end

model capillary_dynamics_CellML1_0_model__tissue_gel_and_fluid_and_lymph_flow()
end

model capillary_dynamics_CellML1_0_model__hydrostatic_pressure_of_tissue_gel(VTS, PTT, CHY, PGH, HYL, CMPTSS, PGHF)

  // Assignment Rules:
  CHY := power(HYL / VTS / 5 , CMPTSS);
  PGH := CHY * PGHF + PTT;
end

model capillary_dynamics_CellML1_0_model__total_osmotic_pressure_of_tissue_gel(CHY, PTCPR, POSHYL, PTC, GCOPF)

  // Assignment Rules:
  POSHYL := CHY * 2;
  PTC := POSHYL * PTCPR * GCOPF;
end

model capillary_dynamics_CellML1_0_model__total_tissue_pressure(VTS1, PTT, VTSF)

  // Assignment Rules:
  PTT := power((VTS1 - VTSF) / VTSF, 2 ) * 1;
end

model capillary_dynamics_CellML1_0_model__interstial_free_fluid_pressure(PGH, POSHYL, PIF)

  // Assignment Rules:
  PIF := PGH - POSHYL;
end

model capillary_dynamics_CellML1_0_model__interstitial_solid_tissue_pressure(PIF, PTT, PTS)

  // Assignment Rules:
  PTS := PTT - PIF;
end

model capillary_dynamics_CellML1_0_model__lymph_flow(PIF, PTT, VTL, PLDF)

  // Assignment Rules:
  VTL := piecewise( 0 , PLD < 0 , PLD * 0.02 );
  PLD1 := PIF + PLDF - PTT;
  PLD := piecewise( 7 , PLD1 > 7 , PLD1 );
end

model capillary_dynamics_CellML1_0_model__interstitial_gel_volume(VTS, VG)

  // Assignment Rules:
  VG := piecewise( 0 , VTS <= 0 , 0 + (11.4 - 0 ) * (VTS - 0 ) / (12 - 0 ) , ( VTS > 0) && (VTS <= 12 ), 11.4 + (14 - 11.4 ) * (VTS - 12 ) / (15 - 12 ) , ( VTS > 12) && (VTS <= 15 ), 14 + (16 - 14 ) * (VTS - 15 ) / (18 - 15 ) , ( VTS > 15) && (VTS <= 18 ), 16 + (17.3 - 16 ) * (VTS - 18 ) / (21 - 18 ) , ( VTS > 18) && (VTS <= 21 ), 17.3 + (18 - 17.3 ) * (VTS - 21 ) / (24 - 21 ) , ( VTS > 21) && (VTS <= 24 ), 18 );
end

model capillary_dynamics_CellML1_0_model__interstitial_free_fluid_volume(VTS, VG, VIF)

  // Assignment Rules:
  VIF := VTS - VG;
end

model capillary_dynamics_CellML1_0_model__capillary_dynamics(time_, VEC, PPD, RVS, DFP, VPF, BFN, PVS)

  // Sub-modules, and any changes to those submodules:
  parameter_values: capillary_dynamics_CellML1_0_model__parameter_values(CFC, TRPL, CPR, LPDE, PCE, PCR, LPK, LPPR, CPK, TSSLML, TSSLTC, HYL, CMPTSS, PGHF, GCOPF, VTSF, PLDF);
  capillary_membrane_dynamics: capillary_dynamics_CellML1_0_model__capillary_membrane_dynamics();
  capillary_pressure: capillary_dynamics_CellML1_0_model__capillary_pressure(RVS, BFN, PVS, PC);
  rate_of_fluid_out_of_capillaries: capillary_dynamics_CellML1_0_model__rate_of_fluid_out_of_capillaries(PC, PGH, PTC, PPC, VTCPL, VTC, CFC);
  plasma_volume_and_protein: capillary_dynamics_CellML1_0_model__plasma_volume_and_protein();
  plasma_volume: capillary_dynamics_CellML1_0_model__plasma_volume(DFP, VTC, VTL, time_, VP, TRPL);
  plasma_protein_concentration: capillary_dynamics_CellML1_0_model__plasma_protein_concentration(PRP, VP, CPP);
  protein_destruction_and_formation: capillary_dynamics_CellML1_0_model__protein_destruction_and_formation(CPP, DLP, CPR, LPPR, LPDE, LPK);
  plasma_leakage: capillary_dynamics_CellML1_0_model__plasma_leakage(PC, VTCPL, PCR, CPK, PCE);
  protein_influx_into_interstitium: capillary_dynamics_CellML1_0_model__protein_influx_into_interstitium(VTCPL, CPP, CPI, DPC);
  total_plasma_protein: capillary_dynamics_CellML1_0_model__total_plasma_protein(DPC, PPD, DPL, DLP, time_, PRP, TRPL);
  plasma_colloid_osmotic_pressure: capillary_dynamics_CellML1_0_model__plasma_colloid_osmotic_pressure(CPP, PPC);
  systemic_tissue_fluid_volume_and_protein: capillary_dynamics_CellML1_0_model__systemic_tissue_fluid_volume_and_protein();
  total_systemic_fluid_volume: capillary_dynamics_CellML1_0_model__total_systemic_fluid_volume(VEC, VP, VPF, VTS);
  interstitial_fluid_volume: capillary_dynamics_CellML1_0_model__interstitial_fluid_volume(VTS, time_, VTS1, TSSLML, TSSLTC);
  total_interstitial_protein: capillary_dynamics_CellML1_0_model__total_interstitial_protein(DPC, DPL, time_, TSP);
  interstitial_protein_concentration: capillary_dynamics_CellML1_0_model__interstitial_protein_concentration(TSP, VTS, CPI);
  interstitial_colloid_osmotic_pressure: capillary_dynamics_CellML1_0_model__interstitial_colloid_osmotic_pressure(CPI, PTCPR);
  lymph_protein_flow: capillary_dynamics_CellML1_0_model__lymph_protein_flow(CPI, VTL, DPL);
  tissue_gel_and_fluid_and_lymph_flow: capillary_dynamics_CellML1_0_model__tissue_gel_and_fluid_and_lymph_flow();
  hydrostatic_pressure_of_tissue_gel: capillary_dynamics_CellML1_0_model__hydrostatic_pressure_of_tissue_gel(VTS, PTT, CHY, PGH, HYL, CMPTSS, PGHF);
  total_osmotic_pressure_of_tissue_gel: capillary_dynamics_CellML1_0_model__total_osmotic_pressure_of_tissue_gel(CHY, PTCPR, POSHYL, PTC, GCOPF);
  total_tissue_pressure: capillary_dynamics_CellML1_0_model__total_tissue_pressure(VTS1, PTT, VTSF);
  interstial_free_fluid_pressure: capillary_dynamics_CellML1_0_model__interstial_free_fluid_pressure(PGH, POSHYL, PIF);
  interstitial_solid_tissue_pressure: capillary_dynamics_CellML1_0_model__interstitial_solid_tissue_pressure(PIF, PTT, PTS);
  lymph_flow: capillary_dynamics_CellML1_0_model__lymph_flow(PIF, PTT, VTL, PLDF);
  interstitial_gel_volume: capillary_dynamics_CellML1_0_model__interstitial_gel_volume(VTS, VG);
  interstitial_free_fluid_volume: capillary_dynamics_CellML1_0_model__interstitial_free_fluid_volume(VTS, VG, VIF);

  // Variable initializations:
  VEC = 14.8548;
  PPD = 4.4805e-06;
  RVS = 2.77751;
  DFP = -4.078e-07;
  VPF = 0.0123238;
  BFN = 2.79521;
  PVS = 3.71612;
end

model capillary_dynamics_CellML1_0_model____main()

  // Sub-modules, and any changes to those submodules:
  environment: capillary_dynamics_CellML1_0_model__environment(time_);
  capillary_dynamics: capillary_dynamics_CellML1_0_model__capillary_dynamics(time_, VEC, PPD, RVS, DFP, VPF, BFN, PVS);
end
