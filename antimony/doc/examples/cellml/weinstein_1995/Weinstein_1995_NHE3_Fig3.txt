//Created by libAntimony v1.4
model Proximal_Tubule_NHE3__environment(time_)
end

model Proximal_Tubule_NHE3__Concentrations(C_ext_Na, C_ext_H, C_ext_NH4, C_int_Na, C_int_H, C_int_NH4, time_)

  // Rate Rules:
  C_ext_Na' = 100;

  // Variable initializations:
  C_ext_Na = 1;
  C_ext_H = 2.51189e-4;
  C_ext_NH4 = 0;
  C_int_Na = 0;
  C_int_H = 1e-3;
  C_int_NH4 = 0;
end

model Proximal_Tubule_NHE3__NHE3_Parameters(XTxP0_NHE3_Na, XTxP0_NHE3_H, XTxP0_NHE3_NH4, K_NHE3_Na, K_NHE3_H, K_NHE3_NH4)

  // Variable initializations:
  XTxP0_NHE3_Na = 1.6e-3;
  XTxP0_NHE3_H = 0.48e-3;
  XTxP0_NHE3_NH4 = 1.6e-3;
  K_NHE3_Na = 30;
  K_NHE3_H = 72e-6;
  K_NHE3_NH4 = 0.027e3;
end

model Proximal_Tubule_NHE3__NHE3(C_ext_Na, C_ext_H, C_ext_NH4, C_int_Na, C_int_H, C_int_NH4, XTxP0_NHE3_Na, XTxP0_NHE3_H, XTxP0_NHE3_NH4, K_NHE3_Na, K_NHE3_H, K_NHE3_NH4, J_NHE3_Na, J_NHE3_H, J_NHE3_NH4, J_NHE3_Na_Max)

  // Assignment Rules:
  XTxP_NHE3_Na := XTxP0_NHE3_Na * 2 * C_int_H / (C_int_H + 1e-6 );
  XTxP_NHE3_H := XTxP0_NHE3_H * 2 * C_int_H / (C_int_H + 1e-6 );
  XTxP_NHE3_NH4 := XTxP0_NHE3_NH4 * 2 * C_int_H / (C_int_H + 1e-6 );
  alpha_ext_Na := C_ext_Na / K_NHE3_Na;
  beta_ext_H := C_ext_H / K_NHE3_H;
  gamma_ext_NH4 := C_ext_NH4 / K_NHE3_NH4;
  alpha_int_Na := C_int_Na / K_NHE3_Na;
  beta_int_H := C_int_H / K_NHE3_H;
  gamma_int_NH4 := C_int_NH4 / K_NHE3_NH4;
  sum_NHE3 := (1 + alpha_ext_Na + beta_ext_H + gamma_ext_NH4) * (XTxP_NHE3_Na * alpha_int_Na + XTxP_NHE3_H * beta_int_H + XTxP_NHE3_NH4 * gamma_int_NH4) + (1 + alpha_int_Na + beta_int_H + gamma_int_NH4) * (XTxP_NHE3_Na * alpha_ext_Na + XTxP_NHE3_H * beta_ext_H + XTxP_NHE3_NH4 * gamma_ext_NH4);
  J_NHE3_Na := XTxP_NHE3_Na * XTxP_NHE3_H / sum_NHE3 * (alpha_ext_Na * beta_int_H - alpha_int_Na * beta_ext_H) + XTxP_NHE3_Na * XTxP_NHE3_NH4 / sum_NHE3 * (alpha_ext_Na * gamma_int_NH4 - alpha_int_Na * gamma_ext_NH4);
  J_NHE3_H := XTxP_NHE3_Na * XTxP_NHE3_H / sum_NHE3 * (alpha_int_Na * beta_ext_H - alpha_ext_Na * beta_int_H) + XTxP_NHE3_H * XTxP_NHE3_NH4 / sum_NHE3 * (beta_ext_H * gamma_int_NH4 - beta_int_H * gamma_ext_NH4);
  J_NHE3_NH4 := XTxP_NHE3_Na * XTxP_NHE3_NH4 / sum_NHE3 * (alpha_int_Na * gamma_ext_NH4 - alpha_ext_Na * gamma_int_NH4) + XTxP_NHE3_H * XTxP_NHE3_NH4 / sum_NHE3 * (gamma_ext_NH4 * beta_int_H - beta_ext_H * gamma_int_NH4);
  J_NHE3_Na_Max := XTxP_NHE3_Na * XTxP_NHE3_H / (XTxP_NHE3_Na + XTxP_NHE3_H);
  K_Na := (beta_int_H + 2 * beta_int_H * beta_ext_H + beta_ext_H) / (beta_int_H + (1 + beta_int_H) * XTxP_NHE3_Na / XTxP_NHE3_H);
  plot := C_ext_Na / (J_NHE3_Na / J_NHE3_Na_Max);
end

model Proximal_Tubule_NHE3____main()

  // Sub-modules, and any changes to those submodules:
  environment: Proximal_Tubule_NHE3__environment(time_);
  Concentrations: Proximal_Tubule_NHE3__Concentrations(C_ext_Na, C_ext_H, C_ext_NH4, C_int_Na, C_int_H, C_int_NH4, time_);
  NHE3_Parameters: Proximal_Tubule_NHE3__NHE3_Parameters(XTxP0_NHE3_Na, XTxP0_NHE3_H, XTxP0_NHE3_NH4, K_NHE3_Na, K_NHE3_H, K_NHE3_NH4);
  NHE3: Proximal_Tubule_NHE3__NHE3(C_ext_Na, C_ext_H, C_ext_NH4, C_int_Na, C_int_H, C_int_NH4, XTxP0_NHE3_Na, XTxP0_NHE3_H, XTxP0_NHE3_NH4, K_NHE3_Na, K_NHE3_H, K_NHE3_NH4, J_NHE3_Na, J_NHE3_H, J_NHE3_NH4, J_NHE3_Na_Max);
end
