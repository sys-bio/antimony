//Created by libAntimony v1.4
model red_cells_and_viscosity_CellML1_0_model__environment(time_)
end

model red_cells_and_viscosity_CellML1_0_model__parameter_values(HMK, HKM, PO2AMB, HM6, HM8, REK, RKC, TRRBC)

  // Variable initializations:
  HMK = 90;
  HKM = 0.53333;
  PO2AMB = 150;
  HM6 = 1850;
  HM8 = 4.714e-08;
  REK = 1;
  RKC = 5.8e-06;
  TRRBC = 0;
end

model red_cells_and_viscosity_CellML1_0_model__blood_viscosity_calculations()
end

model red_cells_and_viscosity_CellML1_0_model__hematocrit_fraction(VP, VRC, HM, HM1)

  // Assignment Rules:
  HM := 100 * HM1;
  HM1 := VRC / VB;
  VB := VP + VRC;
end

model red_cells_and_viscosity_CellML1_0_model__viscosity_due_to_RBCs(HM, VIE, HMK, HKM)

  // Assignment Rules:
  VIE := HM / ((HMK - HM) * HKM);
end

model red_cells_and_viscosity_CellML1_0_model__blood_viscosity(VIE, VIM)

  // Assignment Rules:
  VIM := 0.3333 * VIB;
  VIB := VIE + 1.5;
end

model red_cells_and_viscosity_CellML1_0_model__RBC_formation_and_destruction()
end

model red_cells_and_viscosity_CellML1_0_model__oxygen_stimulation(HM, HM7, PO2AMB, HM6)

  // Assignment Rules:
  HM7 := HM6 - HM5;
  PO2AM1 := piecewise( 80 , PO2AMB > 80 , PO2AMB );
  HM3 := (PO2AM1 - 40 ) * HM;
  HM4 := PO2AMB - 40;
  HM5 := piecewise( 0 , HM3 + HM4 < 0 , HM3 + HM4 );
end

model red_cells_and_viscosity_CellML1_0_model__RBC_production(HM7, RC1, HM8, REK)

  // Assignment Rules:
  RC1 := piecewise( 0 , HM7 * HM8 * REK + 0.000005 < 0 , HM7 * HM8 * REK + 0.000005 );
end

model red_cells_and_viscosity_CellML1_0_model__RBC_destruction(VRC, VIM, RC2, RKC)

  // Assignment Rules:
  RC2 := VRC * RKC * VIM;
end

model red_cells_and_viscosity_CellML1_0_model__RBC_volume(RC1, RC2, time_, VRC, TRRBC)

  // Assignment Rules:
  RCD := RC1 - RC2 + TRRBC;

  // Rate Rules:
  VRC' = RCD;

  // Variable initializations:
  VRC = 2.00439;
end

model red_cells_and_viscosity_CellML1_0_model__red_cells_and_viscosity(time_, VP)

  // Sub-modules, and any changes to those submodules:
  parameter_values: red_cells_and_viscosity_CellML1_0_model__parameter_values(HMK, HKM, PO2AMB, HM6, HM8, REK, RKC, TRRBC);
  blood_viscosity_calculations: red_cells_and_viscosity_CellML1_0_model__blood_viscosity_calculations();
  hematocrit_fraction: red_cells_and_viscosity_CellML1_0_model__hematocrit_fraction(VP, VRC, HM, HM1);
  viscosity_due_to_RBCs: red_cells_and_viscosity_CellML1_0_model__viscosity_due_to_RBCs(HM, VIE, HMK, HKM);
  blood_viscosity: red_cells_and_viscosity_CellML1_0_model__blood_viscosity(VIE, VIM);
  RBC_formation_and_destruction: red_cells_and_viscosity_CellML1_0_model__RBC_formation_and_destruction();
  oxygen_stimulation: red_cells_and_viscosity_CellML1_0_model__oxygen_stimulation(HM, HM7, PO2AMB, HM6);
  RBC_production: red_cells_and_viscosity_CellML1_0_model__RBC_production(HM7, RC1, HM8, REK);
  RBC_destruction: red_cells_and_viscosity_CellML1_0_model__RBC_destruction(VRC, VIM, RC2, RKC);
  RBC_volume: red_cells_and_viscosity_CellML1_0_model__RBC_volume(RC1, RC2, time_, VRC, TRRBC);

  // Variable initializations:
  VP = 3.00449;
end

model red_cells_and_viscosity_CellML1_0_model____main()

  // Sub-modules, and any changes to those submodules:
  environment: red_cells_and_viscosity_CellML1_0_model__environment(time_);
  red_cells_and_viscosity: red_cells_and_viscosity_CellML1_0_model__red_cells_and_viscosity(time_, VP);
end
