//Created by libAntimony v1.3
model chay_1997__environment(time_)
end

model chay_1997__membrane(V, R, T, F, time_, i_K_dr, i_K_Ca, i_K_ATP, i_fast, i_Ca, i_NS, i_NaL)

  // Rate Rules:
  V' = -((i_K_dr + i_K_Ca + i_K_ATP + i_fast + i_Ca + i_NS + i_NaL)) / Cm;

  // Variable initializations:
  V = -38.34146;
  R = 8314;
  T = 310;
  F = 96485;
  Cm = 1;
end

model chay_1997__fast_current_m_gate(m_infinity, V, time_)

  // Assignment Rules:
  m_infinity := 1 / (1 + exp((Vm - V) / Sm));

  // Variable initializations:
  Vm = -25;
  Sm = 9;
end

model chay_1997__fast_current_h_gate(h, V, time_)

  // Assignment Rules:
  tau_h := 1 / (lamda_h * (exp((Vh - V) / (2 * Sh)) + exp((V - Vh) / (2 * Sh))));
  h_infinity := 1 / (1 + exp((Vh - V) / Sh));

  // Rate Rules:
  h' = (h_infinity - h) / tau_h;

  // Variable initializations:
  h = 0.214723;
  lamda_h = 12.5;
  Vh = -48;
  Sh = -7;
end

model chay_1997__fast_current(i_fast, time_, V, m_infinity, h)

  // Sub-modules, and any changes to those submodules:
  fast_current_m_gate: chay_1997__fast_current_m_gate(m_infinity, V, time_);
  fast_current_h_gate: chay_1997__fast_current_h_gate(h, V, time_);

  // Assignment Rules:
  i_fast := g_fast * power(m_infinity, 3 ) * h * (V - V_fast);

  // Variable initializations:
  g_fast = 600;
  V_fast = 80;
end

model chay_1997__calcium_current_d_gate(d, V, time_)

  // Assignment Rules:
  tau_d := 1 / (lamda_d * (exp((Vd - V) / (2 * Sd)) + exp((V - Vd) / (2 * Sd))));
  d_infinity := 1 / (1 + exp((Vd - V) / Sd));

  // Rate Rules:
  d' = (d_infinity - d) / tau_d;

  // Variable initializations:
  d = 0.0031711238;
  lamda_d = 2.5;
  Vd = -10;
  Sd = 5;
end

model chay_1997__calcium_current_f_gate(f_infinity, K_Ca, Ca_i)

  // Assignment Rules:
  f_infinity := K_Ca / (K_Ca + Ca_i);
end

model chay_1997__calcium_current(i_Ca, K_Ca, R, F, T, time_, V, Ca_i, f_infinity, d)

  // Sub-modules, and any changes to those submodules:
  calcium_current_d_gate: chay_1997__calcium_current_d_gate(d, V, time_);
  calcium_current_f_gate: chay_1997__calcium_current_f_gate(f_infinity, K_Ca, Ca_i);

  // Assignment Rules:
  i_Ca := P_Ca * d * f_infinity * 2 * F * V / (R * T) * (Ca_o - Ca_i * exp(2 * F * V / (R * T))) / (1 - exp(2 * F * V / (R * T)));

  // Variable initializations:
  K_Ca = 1;
  P_Ca = 2;
  Ca_o = 2500;
end

model chay_1997__cationic_nonselective_inward_current(i_NS, Ca_lum, V, time_)

  // Assignment Rules:
  i_NS := g_NS * power(K_NS, 2 ) / (power(K_NS, 2 ) + power(Ca_lum, 2 )) * ((V - VNS) / (1 - exp(0.1 * (VNS - V))) - 10 );

  // Variable initializations:
  g_NS = 5;
  K_NS = 50;
  VNS = -20;
end

model chay_1997__delayed_rectifier_K_channel_current_n_gate(n, V, time_)

  // Assignment Rules:
  n_infinity := 1 / (1 + exp((Vn - V) / Sn));
  tau_n := 1 / (lamda_n * (exp((Vn - V) / (2 * Sn)) + exp((V - Vn) / (2 * Sn))));

  // Rate Rules:
  n' = (n_infinity - n) / tau_n;

  // Variable initializations:
  n = 0.1836403;
  lamda_n = 12.5;
  Vn = -18;
  Sn = 14;
end

model chay_1997__delayed_rectifier_K_channel_current(i_K_dr, V_K, time_, V, n)

  // Sub-modules, and any changes to those submodules:
  delayed_rectifier_K_channel_current_n_gate: chay_1997__delayed_rectifier_K_channel_current_n_gate(n, V, time_);

  // Assignment Rules:
  i_K_dr := g_K_dr * power(n, 4 ) * (V - V_K);

  // Variable initializations:
  V_K = -75;
  g_K_dr = 600;
end

model chay_1997__Ca_sensitive_K_current(i_K_Ca, K_Ca, time_, V, V_K, Ca_i)

  // Assignment Rules:
  i_K_Ca := g_K_Ca * power(Ca_i, 3 ) / (power(K_Ca, 3 ) + power(Ca_i, 3 )) * (V - V_K);

  // Variable initializations:
  g_K_Ca = 5;
end

model chay_1997__ATP_sensitive_K_current(i_K_ATP, time_, V, V_K)

  // Assignment Rules:
  i_K_ATP := g_K_ATP * (V - V_K);

  // Variable initializations:
  g_K_ATP = 2;
end

model chay_1997__Na_leak_current(i_NaL, time_, V)

  // Assignment Rules:
  i_NaL := g_NaL * (V - V_Na);

  // Variable initializations:
  g_NaL = 0.3;
  V_Na = 80;
end

model chay_1997__cytosolic_calcium(Ca_i, Ca_lum, i_Ca, time_)

  // Rate Rules:
  Ca_i' = k_rel * (Ca_lum - Ca_i) - (omega * i_Ca + k_Ca * Ca_i + k_pump * Ca_i);
  Ca_lum' = -(k_rel) * (Ca_lum - Ca_i) + k_pump * Ca_i;

  // Variable initializations:
  Ca_i = 0.6959466;
  Ca_lum = 102.686;
  k_rel = 0.2;
  k_Ca = 7;
  k_pump = 30;
  omega = 0.2;
end

model chay_1997____main()

  // Sub-modules, and any changes to those submodules:
  environment: chay_1997__environment(time_);
  membrane: chay_1997__membrane(V, R, T, F, time_, i_K_dr, i_K_Ca, i_K_ATP, i_fast, i_Ca, i_NS, i_NaL);
  fast_current: chay_1997__fast_current(i_fast, time_, V, m_infinity, h);
  calcium_current: chay_1997__calcium_current(i_Ca, K_Ca, R, F, T, time_, V, Ca_i, f_infinity, d);
  cationic_nonselective_inward_current: chay_1997__cationic_nonselective_inward_current(i_NS, Ca_lum, V, time_);
  delayed_rectifier_K_channel_current: chay_1997__delayed_rectifier_K_channel_current(i_K_dr, V_K, time_, V, n);
  Ca_sensitive_K_current: chay_1997__Ca_sensitive_K_current(i_K_Ca, K_Ca, time_, V, V_K, Ca_i);
  ATP_sensitive_K_current: chay_1997__ATP_sensitive_K_current(i_K_ATP, time_, V, V_K);
  Na_leak_current: chay_1997__Na_leak_current(i_NaL, time_, V);
  cytosolic_calcium: chay_1997__cytosolic_calcium(Ca_i, Ca_lum, i_Ca, time_);
end
