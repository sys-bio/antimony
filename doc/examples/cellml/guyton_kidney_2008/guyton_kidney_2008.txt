//Created by libAntimony v1.4

//Warnings from automatic translation:
//    In module 'kidney_CellML1_0_model__kidney', the variables glomerular_filtration_rate.GLPC and GLPC were unable to be set as equivalent:  Loop detected:  'glomerular_filtration_rate.GLPC' may not be set to be equal to 'GLPC' because GLPC's definition already includes glomerular_filtration_rate.GLPC either directly or by proxy.
//    In module 'kidney_CellML1_0_model__kidney', the variables proximal_tubular_and_macula_densa_flow.GFN and GFN were unable to be set as equivalent:  Loop detected:  'proximal_tubular_and_macula_densa_flow.GFN' may not be set to be equal to 'GFN' because GFN's definition already includes proximal_tubular_and_macula_densa_flow.GFN either directly or by proxy.

model kidney_CellML1_0_model__environment(time_)
end

model kidney_CellML1_0_model__parameter_values(GBL, RAPRSP, RFCDFT, RCDFDP, RCDFPC, RNAUGN, RNAULL, RNAUUL, RNAGTC, RNAUAD, ARF, ANMAM, ANMARL, AARK, AARLL, ANPXAF, AUMK1, ANMEM, EFAFR, EARK, EARLL, REK, GPPD, GLPCA, PXTP, GFLC, GFNLL, GFNDMP, URFORM, MDFL1, RTPPR, RTPPRS, RTSPRS, MDFLKM, ANMKEM, RVRS, RFABX, RABSC, RFABDP, RFABDM, DTNAR, DTNARL, DIURET, AHMNAR, ANMNAM, RFABKM, ANMKEL, CKEEX)

  // Variable initializations:
  GBL = 0;
  RAPRSP = 0;
  RFCDFT = 0;
  RCDFDP = 2000;
  RCDFPC = 0;
  RNAUGN = 0.6;
  RNAULL = 0.3;
  RNAUUL = 10;
  RNAGTC = 15;
  RNAUAD = 0;
  ARF = 0.5;
  ANMAM = 1.4;
  ANMARL = 0.86;
  AARK = 1;
  AARLL = 4;
  ANPXAF = 1.5;
  AUMK1 = 0.3;
  ANMEM = 1.6;
  EFAFR = 0;
  EARK = 1;
  EARLL = 24;
  REK = 1;
  GPPD = 1.0;
  GLPCA = 1.0;
  PXTP = 8;
  GFLC = 0.0208333;
  GFNLL = 0.001;
  GFNDMP = 3;
  URFORM = 0.24;
  MDFL1 = 10;
  RTPPR = 0.9;
  RTPPRS = 15.2;
  RTSPRS = 6;
  MDFLKM = 0.667;
  ANMKEM = 2;
  RVRS = 19.167;
  RFABX = 0.8;
  RABSC = 0.5;
  RFABDP = 1;
  RFABDM = 0.3;
  DTNAR = 0.675;
  DTNARL = 1e-06;
  DIURET = 1;
  AHMNAR = 0.3;
  ANMNAM = 1;
  RFABKM = 0.03;
  ANMKEL = 0.3;
  CKEEX = 4;
end

model kidney_CellML1_0_model__perfusion_pressure(PA, time_, PAR, GBL, RAPRSP, RFCDFT, RCDFPC, RCDFDP)

  // Assignment Rules:
  PAR := piecewise( RAPRSP , ( RAPRSP > 0) && (RFCDFT <= 0 ), PAR1 , RFCDFT > 0 , PA - GBL );

  // Rate Rules:
  PAR1' = (100 + (PA - 100 ) * RCDFPC - PAR1) / RCDFDP;

  // Variable initializations:
  PAR1 = 103.525;
end

model kidney_CellML1_0_model__renal_autoregulatory_feedback_factor(MDFLW, time_, RNAUG2, RNAUGN, RNAULL, RNAUUL, RNAUAD)

  // Assignment Rules:
  RNAUG2 := RNAUG1 - RNAUG3;
  RNAUG1 := piecewise( RNAULL , RNAUG1T < RNAULL , RNAUUL , RNAUG1T > RNAUUL , RNAUG1T );
  RNAUG1T := (MDFLW - 1 ) * RNAUGN + 1;

  // Rate Rules:
  RNAUG3' = (RNAUG2 - 1 ) * RNAUAD;

  // Variable initializations:
  RNAUG3 = 0.0;
end

model kidney_CellML1_0_model__afferent_arterial_resistance()
end

model kidney_CellML1_0_model__autonomic_effect_on_AAR(AUM, AUMK, ARF)

  // Assignment Rules:
  AUMK := piecewise( 0.8 , AUMKT < 0.8 , AUMKT );
  AUMKT := (AUM - 1 ) * ARF + 1;
end

model kidney_CellML1_0_model__angiotensin_effect_on_AAR(ANM, ANMAR, ANMAM, ANMARL)

  // Assignment Rules:
  ANMAR := piecewise( ANMARL , ANMAR1 < ANMARL , ANMAR1 );
  ANMAR1 := (ANM - 1 ) * ANMAM + 1;
end

model kidney_CellML1_0_model__AAR_calculation(PAMKRN, AUMK, RNAUG2, ANMAR, MYOGRS, AAR1, AARK)

  // Assignment Rules:
  AAR1 := AARK * PAMKRN * AUMK * RNAUG2 * ANMAR * 40 * MYOGRS;
end

model kidney_CellML1_0_model__atrial_natriuretic_peptide_effect_on_AAR(AAR1, ANPX, AAR, ANPXAF, AARLL)

  // Assignment Rules:
  AAR := piecewise( AARLL , AART < AARLL , AART );
  AART := AAR1 - ANPX * ANPXAF + ANPXAF;
end

model kidney_CellML1_0_model__efferent_arterial_resistance()
end

model kidney_CellML1_0_model__autonomic_effect_on_EAR(AUMK, AUMK2, AUMK1)

  // Assignment Rules:
  AUMK2 := (AUMK - 1 ) * AUMK1 + 1;
end

model kidney_CellML1_0_model__angiotensin_effect_on_EAR(ANM, ANMER, ANMEM)

  // Assignment Rules:
  ANMER := (ANM - 1 ) * ANMEM + 1;
end

model kidney_CellML1_0_model__effect_of_renal_autoregulatory_feedback_on_EAR(RNAUG2, RNAUG4, EFAFR)

  // Assignment Rules:
  RNAUG4 := (RNAUG2 - 1 ) * EFAFR + 1;
end

model kidney_CellML1_0_model__EAR_calculation(ANMER, AUMK2, MYOGRS, RNAUG4, EAR, EARK, EARLL)

  // Assignment Rules:
  EAR := piecewise( EARLL , EAR1 < EARLL , EAR1 );
  EAR1 := 43.333 * EARK * ANMER * RNAUG4 * MYOGRS * AUMK2;
end

model kidney_CellML1_0_model__total_renal_resistance(AAR, EAR, RR)

  // Assignment Rules:
  RR := AAR + EAR;
end

model kidney_CellML1_0_model__normal_renal_blood_flow(RR, PAR, RFN)

  // Assignment Rules:
  RFN := PAR / RR;
end

model kidney_CellML1_0_model__actual_renal_blood_flow(RFN, RBF, REK)

  // Assignment Rules:
  RBF := REK * RFN;
end

model kidney_CellML1_0_model__glomerular_capillaries()
end

model kidney_CellML1_0_model__glomerular_colloid_osmotic_pressure(HM1, RFN, GFN, PPC, GLPC, GPPD, GLPCA)

  // Assignment Rules:
  GLPC := piecewise( power(EFAFPR, 1.35 ) * PPC * 0.98 , GLPCA > 0 , PPC + 4 );
  EFAFPR := piecewise( 1 , EFAFPR1 < 1 , EFAFPR1 );
  EFAFPR1 := RFN * (1 - HM1) / (RFN * (1 - HM1) - GFN);
end

model kidney_CellML1_0_model__glomerular_pressure(AAR, PAR, RFN, GLP)

  // Assignment Rules:
  GLP := PAR - APD;
  APD := AAR * RFN;
end

model kidney_CellML1_0_model__glomerular_filtration_rate(GLP, GLPC, GFN, GFR, PXTP, GFLC, GFNLL, REK)

  // Assignment Rules:
  GFN := piecewise( GFNLL , GFN1 < GFNLL , GFN1 );
  GFR := GFN * REK;
  PFL := GLP - GLPC - PXTP;
  GFN1 := PFL * GFLC;
end

model kidney_CellML1_0_model__glomerular_urea_concentration(UROD, time_, PLUR, URFORM)

  // Rate Rules:
  PLUR' = URFORM - UROD;

  // Variable initializations:
  PLUR = 159.549;
end

model kidney_CellML1_0_model__proximal_tubular_and_macula_densa_flow(GFN, MDFLW, MDFL1)

  // Assignment Rules:
  MDFLW := piecewise( 0 , MDFLWT < 0 , MDFLWT );
  PTFL := GFN * 8;
  MDFLWT := (PTFL - 1 ) * MDFL1 + 1;
end

model kidney_CellML1_0_model__renal_tissue_osmotic_pressure(GLPC, RTSPPC, RTPPR, RTPPRS)

  // Assignment Rules:
  RTSPPC := piecewise( 1 , RTSPPC1 < 1 , RTSPPC1 );
  RTSPPC1 := GLPC * RTPPR - RTPPRS;
end

model kidney_CellML1_0_model__urea_handling()
end

model kidney_CellML1_0_model__plasma_urea_concentration(PLUR, VTW, PLURC)

  // Assignment Rules:
  PLURC := PLUR / VTW;
end

model kidney_CellML1_0_model__renal_peritubular_capillaries()
end

model kidney_CellML1_0_model__peritubular_capillary_pressure(RFN, RCPRS, RFABX, RVRS)

  // Assignment Rules:
  RCPRS := ((RFN - 1.2 ) * RFABX + 1.2 ) * RVRS;
end

model kidney_CellML1_0_model__peritubular_capillary_reabsorption_factor(RCPRS, GLPC, RTSPPC, RFABD, RTSPRS, RABSC, RFABDP, RFABDM)

  // Assignment Rules:
  RFABD := piecewise( 0.0001 , RFABD1 < 0.0001 , RFABD1 );
  RABSPR := GLPC + RTSPRS - RCPRS - RTSPPC;
  RFAB1 := RABSPR * RABSC;
  RFAB := RFAB1;
  RFABD1 := (RFAB - 1 ) * RFABDM + 1;
end

model kidney_CellML1_0_model__sodium_and_potassium_handling()
end

model kidney_CellML1_0_model__distal_tubular_Na_delivery(MDFLW, CNA, DTNAI)

  // Assignment Rules:
  DTNAI := MDFLW * CNA * 0.0061619;
end

model kidney_CellML1_0_model__Na_reabsorption_into_distal_tubules(ADHMK, AMNA, RFABD, DTNARA, DTNAR, DIURET, AHMNAR, DTNARL)

  // Assignment Rules:
  DTNARA := piecewise( DTNARL , DTNARA1 < DTNARL , DTNARA1 );
  DTNARA1 := AMNA * RFABD * DTNAR / DIURET * ((ADHMK - 1 ) * AHMNAR + 1 );
end

model kidney_CellML1_0_model__angiotensin_induced_Na_reabsorption_into_distal_tubules(ANM, DTNANG, ANMNAM)

  // Assignment Rules:
  DTNANG := piecewise( 0 , DTNANG1 < 0 , DTNANG1 );
  DTNANG1 := ((ANM - 1 ) * ANMNAM + 1 ) * 0.1;
end

model kidney_CellML1_0_model__distal_tubular_K_delivery(DTNAI, CNA, CKE, DTKI)

  // Assignment Rules:
  DTKI := DTNAI * CKE / CNA;
end

model kidney_CellML1_0_model__effect_of_physical_forces_on_distal_K_reabsorption(RFABD, RFABK, RFABKM)

  // Assignment Rules:
  RFABK := (RFABD - 1 ) * RFABKM;
end

model kidney_CellML1_0_model__effect_of_fluid_flow_on_distal_K_reabsorption(MDFLW, MDFLK, MDFLKM)

  // Assignment Rules:
  MDFLK := piecewise( 0.1 , MDFLK1 < 0.1 , MDFLK1 );
  MDFLK1 := (MDFLW - 1 ) * MDFLKM + 1;
end

model kidney_CellML1_0_model__K_reabsorption_into_distal_tubules(KODN, VUDN, time_, DTKA)

  // Rate Rules:
  DTKA' = (KODN / VUDN * 0.0004518 - DTKA) * 1.0;

  // Variable initializations:
  DTKA = 0.0367573;
end

model kidney_CellML1_0_model__K_secretion_from_distal_tubules(CKE, AMK, MDFLK, ANM, DTKSC, ANMKEM, ANMKEL, CKEEX)

  // Assignment Rules:
  DTKSC := power(CKE / 4.4 , CKEEX) * AMK * 0.08 * MDFLK / ANMKE;
  ANMKE1 := (ANM - 1 ) * ANMKEM + 1;
  ANMKE := piecewise( ANMKEL , ANMKE1 < ANMKEL , ANMKE1 );
end

model kidney_CellML1_0_model__urinary_excretion()
end

model kidney_CellML1_0_model__normal_Na_excretion(DTNAI, DTNANG, DTNARA, NODN)

  // Assignment Rules:
  NODN := piecewise( 0.00000001 , NODN1 < 0.00000001 , NODN1 );
  NODN1 := DTNAI - DTNARA - DTNANG;
end

model kidney_CellML1_0_model__normal_K_excretion(DTKI, RFABK, DTKSC, DTKA, KODN)

  // Assignment Rules:
  KODN := piecewise( 0 , KODN1 < 0 , KODN1 );
  KODN1 := DTKI + DTKSC - DTKA - RFABK;
end

model kidney_CellML1_0_model__normal_urea_excretion(GFN, PLURC, DTURI)

  // Assignment Rules:
  DTURI := power(GFN, 2 ) * PLURC * 3.84;
end

model kidney_CellML1_0_model__normal_osmolar_and_water_excretion(DTURI, NODN, KODN, OSMOPN1, OSMOPN)

  // Assignment Rules:
  OSMOPN1 := DTURI + 2 * (NODN + KODN);
  OSMOPN := piecewise( 0.6 , OSMOPN1 > 0.6 , OSMOPN1 );
end

model kidney_CellML1_0_model__normal_urine_volume(OSMOPN, OSMOPN1, ADHMK, VUDN)

  // Assignment Rules:
  VUDN := OSMOPN / (600 * ADHMK) + OSMOP1 / 360;
  OSMOP1T := OSMOPN1 - 0.6;
  OSMOP1 := piecewise( 0 , OSMOP1T < 0 , OSMOP1T );
end

model kidney_CellML1_0_model__actual_Na_excretion_rate(NODN, NOD, REK)

  // Assignment Rules:
  NOD := NODN * REK;
end

model kidney_CellML1_0_model__actual_K_excretion_rate(KODN, KOD, REK)

  // Assignment Rules:
  KOD := KODN * REK;
end

model kidney_CellML1_0_model__actual_urea_excretion_rate(DTURI, UROD, REK)

  // Assignment Rules:
  UROD := DTURI * REK;
end

model kidney_CellML1_0_model__actual_urine_volume(VUDN, VUD, REK)

  // Assignment Rules:
  VUD := VUDN * REK;
end

model kidney_CellML1_0_model__kidney(time_, ADHMK, AMK, AMNA, ANM, ANPX, AUM, CKE, CNA, HM1, MYOGRS, PA, PAMKRN, PPC, VTW)

  // Sub-modules, and any changes to those submodules:
  parameter_values: kidney_CellML1_0_model__parameter_values(GBL, RAPRSP, RFCDFT, RCDFDP, RCDFPC, RNAUGN, RNAULL, RNAUUL, RNAGTC, RNAUAD, ARF, ANMAM, ANMARL, AARK, AARLL, ANPXAF, AUMK1, ANMEM, EFAFR, EARK, EARLL, REK, GPPD, GLPCA, PXTP, GFLC, GFNLL, GFNDMP, URFORM, MDFL1, RTPPR, RTPPRS, RTSPRS, MDFLKM, ANMKEM, RVRS, RFABX, RABSC, RFABDP, RFABDM, DTNAR, DTNARL, DIURET, AHMNAR, ANMNAM, RFABKM, ANMKEL, CKEEX);
  perfusion_pressure: kidney_CellML1_0_model__perfusion_pressure(PA, time_, PAR, GBL, RAPRSP, RFCDFT, RCDFPC, RCDFDP);
  renal_autoregulatory_feedback_factor: kidney_CellML1_0_model__renal_autoregulatory_feedback_factor(MDFLW, time_, RNAUG2, RNAUGN, RNAULL, RNAUUL, RNAUAD);
  afferent_arterial_resistance: kidney_CellML1_0_model__afferent_arterial_resistance();
  autonomic_effect_on_AAR: kidney_CellML1_0_model__autonomic_effect_on_AAR(AUM, AUMK, ARF);
  angiotensin_effect_on_AAR: kidney_CellML1_0_model__angiotensin_effect_on_AAR(ANM, ANMAR, ANMAM, ANMARL);
  AAR_calculation: kidney_CellML1_0_model__AAR_calculation(PAMKRN, AUMK, RNAUG2, ANMAR, MYOGRS, AAR1, AARK);
  atrial_natriuretic_peptide_effect_on_AAR: kidney_CellML1_0_model__atrial_natriuretic_peptide_effect_on_AAR(AAR1, ANPX, AAR, ANPXAF, AARLL);
  efferent_arterial_resistance: kidney_CellML1_0_model__efferent_arterial_resistance();
  autonomic_effect_on_EAR: kidney_CellML1_0_model__autonomic_effect_on_EAR(AUMK, AUMK2, AUMK1);
  angiotensin_effect_on_EAR: kidney_CellML1_0_model__angiotensin_effect_on_EAR(ANM, ANMER, ANMEM);
  effect_of_renal_autoregulatory_feedback_on_EAR: kidney_CellML1_0_model__effect_of_renal_autoregulatory_feedback_on_EAR(RNAUG2, RNAUG4, EFAFR);
  EAR_calculation: kidney_CellML1_0_model__EAR_calculation(ANMER, AUMK2, MYOGRS, RNAUG4, EAR, EARK, EARLL);
  total_renal_resistance: kidney_CellML1_0_model__total_renal_resistance(AAR, EAR, RR);
  normal_renal_blood_flow: kidney_CellML1_0_model__normal_renal_blood_flow(RR, PAR, RFN);
  actual_renal_blood_flow: kidney_CellML1_0_model__actual_renal_blood_flow(RFN, RBF, REK);
  glomerular_capillaries: kidney_CellML1_0_model__glomerular_capillaries();
  glomerular_colloid_osmotic_pressure: kidney_CellML1_0_model__glomerular_colloid_osmotic_pressure(HM1, RFN, GFN, PPC, GLPC, GPPD, GLPCA);
  glomerular_pressure: kidney_CellML1_0_model__glomerular_pressure(AAR, PAR, RFN, GLP);
  glomerular_filtration_rate: kidney_CellML1_0_model__glomerular_filtration_rate(GLP, GLPC0, GFN, GFR, PXTP, GFLC, GFNLL, REK);
  glomerular_urea_concentration: kidney_CellML1_0_model__glomerular_urea_concentration(UROD, time_, PLUR, URFORM);
  proximal_tubular_and_macula_densa_flow: kidney_CellML1_0_model__proximal_tubular_and_macula_densa_flow(GFN0, MDFLW, MDFL1);
  renal_tissue_osmotic_pressure: kidney_CellML1_0_model__renal_tissue_osmotic_pressure(GLPC, RTSPPC, RTPPR, RTPPRS);
  urea_handling: kidney_CellML1_0_model__urea_handling();
  plasma_urea_concentration: kidney_CellML1_0_model__plasma_urea_concentration(PLUR, VTW, PLURC);
  renal_peritubular_capillaries: kidney_CellML1_0_model__renal_peritubular_capillaries();
  peritubular_capillary_pressure: kidney_CellML1_0_model__peritubular_capillary_pressure(RFN, RCPRS, RFABX, RVRS);
  peritubular_capillary_reabsorption_factor: kidney_CellML1_0_model__peritubular_capillary_reabsorption_factor(RCPRS, GLPC, RTSPPC, RFABD, RTSPRS, RABSC, RFABDP, RFABDM);
  sodium_and_potassium_handling: kidney_CellML1_0_model__sodium_and_potassium_handling();
  distal_tubular_Na_delivery: kidney_CellML1_0_model__distal_tubular_Na_delivery(MDFLW, CNA, DTNAI);
  Na_reabsorption_into_distal_tubules: kidney_CellML1_0_model__Na_reabsorption_into_distal_tubules(ADHMK, AMNA, RFABD, DTNARA, DTNAR, DIURET, AHMNAR, DTNARL);
  angiotensin_induced_Na_reabsorption_into_distal_tubules: kidney_CellML1_0_model__angiotensin_induced_Na_reabsorption_into_distal_tubules(ANM, DTNANG, ANMNAM);
  distal_tubular_K_delivery: kidney_CellML1_0_model__distal_tubular_K_delivery(DTNAI, CNA, CKE, DTKI);
  effect_of_physical_forces_on_distal_K_reabsorption: kidney_CellML1_0_model__effect_of_physical_forces_on_distal_K_reabsorption(RFABD, RFABK, RFABKM);
  effect_of_fluid_flow_on_distal_K_reabsorption: kidney_CellML1_0_model__effect_of_fluid_flow_on_distal_K_reabsorption(MDFLW, MDFLK, MDFLKM);
  K_reabsorption_into_distal_tubules: kidney_CellML1_0_model__K_reabsorption_into_distal_tubules(KODN, VUDN, time_, DTKA);
  K_secretion_from_distal_tubules: kidney_CellML1_0_model__K_secretion_from_distal_tubules(CKE, AMK, MDFLK, ANM, DTKSC, ANMKEM, ANMKEL, CKEEX);
  urinary_excretion: kidney_CellML1_0_model__urinary_excretion();
  normal_Na_excretion: kidney_CellML1_0_model__normal_Na_excretion(DTNAI, DTNANG, DTNARA, NODN);
  normal_K_excretion: kidney_CellML1_0_model__normal_K_excretion(DTKI, RFABK, DTKSC, DTKA, KODN);
  normal_urea_excretion: kidney_CellML1_0_model__normal_urea_excretion(GFN, PLURC, DTURI);
  normal_osmolar_and_water_excretion: kidney_CellML1_0_model__normal_osmolar_and_water_excretion(DTURI, NODN, KODN, OSMOPN1, OSMOPN);
  normal_urine_volume: kidney_CellML1_0_model__normal_urine_volume(OSMOPN, OSMOPN1, ADHMK, VUDN);
  actual_Na_excretion_rate: kidney_CellML1_0_model__actual_Na_excretion_rate(NODN, NOD, REK);
  actual_K_excretion_rate: kidney_CellML1_0_model__actual_K_excretion_rate(KODN, KOD, REK);
  actual_urea_excretion_rate: kidney_CellML1_0_model__actual_urea_excretion_rate(DTURI, UROD, REK);
  actual_urine_volume: kidney_CellML1_0_model__actual_urine_volume(VUDN, VUD, REK);

  // Variable initializations:
  ADHMK = 1.0;
  AMK = 1.037;
  AMNA = 1.0;
  ANM = 0.987545;
  ANPX = 1.0;
  AUM = 1.00066;
  CKE = 4.44092;
  CNA = 142.035;
  HM1 = 0.39984739;
  MYOGRS = 1.0;
  PA = 103.525;
  PAMKRN = 1.0;
  PPC = 29.9941;
  VTW = 39.8952;
end

model kidney_CellML1_0_model____main()

  // Sub-modules, and any changes to those submodules:
  environment: kidney_CellML1_0_model__environment(time_);
  kidney: kidney_CellML1_0_model__kidney(time_, ADHMK, AMK, AMNA, ANM, ANPX, AUM, CKE, CNA, HM1, MYOGRS, PA, PAMKRN, PPC, VTW);
end
